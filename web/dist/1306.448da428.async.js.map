{"version":3,"file":"1306.448da428.async.js","mappings":"kPACA,EAA6B,qBAA7B,EAAwD,c,WCmHxD,EAvGgB,SAAHA,GAAgD,IAAAC,EAAAD,EAA1CE,MAAAA,OAAK,IAAAD,EAAG,GAAEA,EAAEE,EAAQH,EAARG,SACrBC,EAAUC,EAAAA,EAAMC,WAAhBF,MACRG,GAAwCC,EAAAA,EAAAA,WAAS,GAAMC,EAAAC,IAAAH,EAAA,GAAhDI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,GAAoCL,EAAAA,EAAAA,UAAS,IAAGM,EAAAJ,IAAAG,EAAA,GAAzCE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAC1BG,GAAWC,EAAAA,EAAAA,QAAiB,OAElCC,EAAAA,EAAAA,YAAU,WACU,IAAAC,EAAdT,IACc,QAAhBS,EAAAH,EAASI,eAAO,IAAAD,GAAhBA,EAAkBE,QAEtB,GAAG,CAACX,IAEJ,IAaMY,EAAqB,WACzB,GAAIR,GAAcb,EAAO,CACvB,IAAMsB,EAAUT,EACbU,MAAM,KACNC,KAAI,SAACC,GAAG,OAAKA,EAAIC,MAAM,IACvBC,QAAO,SAACF,GAAG,OAAKA,IAAQzB,EAAM4B,SAASH,EAAI,IAC9CxB,SAAAA,EAAQ,GAAA4B,OAAAC,IAAO9B,GAAK8B,IAAKR,IAC3B,CACAZ,GAAgB,GAChBI,EAAc,GAChB,EAoBMiB,EAAW/B,aAAK,EAALA,EAAOwB,KAlBT,SAACC,GACd,OACEO,EAAAA,EAAAA,KAACC,EAAAA,EAAO,CAACC,MAAOT,EAAIU,UAClBH,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAEFC,UAAWC,EACXC,UAAQ,EACRC,QAAS,SAACC,GAhCE,IAACC,EACbpB,EAgCEmB,EAAEE,iBAjCSD,EAkCCjB,EAjCdH,EAAUtB,aAAK,EAALA,EAAO2B,QAAO,SAACF,GAAG,OAAKA,IAAQiB,CAAU,IACzDzC,SAAAA,EAAWqB,QAAAA,EAAW,GAiChB,EAAEa,SAEDV,GARIA,IAYb,IAIMmB,EAAoC,CACxCC,WAAY3C,EAAM4C,iBAClBC,YAAa,UAGf,OACEC,EAAAA,EAAAA,MAAA,OAAAb,SAAA,CACGc,MAAMC,QAAQnB,IAAaA,EAASoB,OAAS,IAC5CnB,EAAAA,EAAAA,KAACoB,EAAAA,EAAa,CACZf,UAAWC,EACXe,MAAO,CACLC,MAAO,GACPC,QAAS,EACTC,KAAM,OACNC,SAAU,KAEZC,MAAO,SAACjB,GACS,WAAXA,EAAEe,MAAgC,UAAXf,EAAEe,OAC1Bf,EAAEkB,OAAeC,MAAQ,wBAE9B,EACAC,MAAO,CAAEN,QAAS,EAAGO,MAAO,EAAGR,MAAO,EAAGG,SAAU,KACnDM,QAAQ,EAAM5B,SAEbJ,IAGJtB,GACCuB,EAAAA,EAAAA,KAACgC,EAAAA,EAAK,CACJC,IAAKlD,EACLyC,KAAK,OACLU,KAAK,QACLlE,MAAOa,EACPZ,SArEkB,SAACwC,GACzB3B,EAAc2B,EAAEkB,OAAO3D,MACzB,EAoEQmE,OAAQ9C,EACR+C,aAAc/C,KAGhBW,EAAAA,EAAAA,KAACI,EAAAA,EAAG,CAACiC,QA9EO,WAChB3D,GAAgB,EAClB,EA4E+BkD,MAAOhB,EAAaT,UAC3CH,EAAAA,EAAAA,KAACsC,EAAAA,EAAY,QAKvB,C,kLCjHA,EAA+B,uBAA/B,EAA8D,gBAA9D,EAA6F,uB,gCCWvFC,EAAQ,SAAHzE,GAA4C,IAAtC0E,EAAE1E,EAAF0E,GAAInC,EAASvC,EAATuC,UAAcoC,EAAKC,IAAA5E,EAAA6E,GACtC,OACE3C,EAAAA,EAAAA,KAAA,MAAA4C,IAAAA,IAAA,GACMH,GAAK,IACTI,IAAG,GAAAhD,OAAKiD,EAAAA,EAAQ,oBAAAjD,OAAmB2C,GACnCO,IAAI,GACJ1C,UAAW2C,IAAW1C,EAAqBD,KAGjD,EAEA,IAEa4C,EAAmB,SAAHC,GAA+B,IAAzBV,EAAEU,EAAFV,GACjC,OACExC,EAAAA,EAAAA,KAACmD,EAAAA,EAAO,CACNC,UAAU,OACVC,SAASrD,EAAAA,EAAAA,KAACuC,EAAK,CAACC,GAAIA,EAAInC,UAAWC,IAA8BH,UAEjEH,EAAAA,EAAAA,KAACuC,EAAK,CAACC,GAAIA,EAAInC,UAAWC,KAGhC,C,0JC/BagD,EAAwB,SAACC,GACpC,IAAAlF,GAA0BC,EAAAA,EAAAA,UAAiB,IAAGC,EAAAC,IAAAH,EAAA,GAAvCmF,EAAKjF,EAAA,GAAEkF,EAAQlF,EAAA,GAEhBmF,GAAgBC,EAAAA,EAAAA,aAAWC,IAAAC,MAAAC,MAAC,SAAAC,IAAA,IAAAC,EAAAC,EAAA,OAAAJ,MAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACTC,EAAAA,EAAMC,IAAIhB,GAAI,OAAAS,EAAAG,EAAAK,KACnB,KADVP,EAAID,EAAJC,MACCQ,MACPhB,EAASQ,aAAI,EAAJA,EAAMS,SAChB,wBAAAP,EAAAQ,OAAA,GAAAZ,EAAA,KACA,CAACR,IAKJ,OAJAtE,EAAAA,EAAAA,YAAU,WACRyE,GACF,GAAG,CAACA,IAEGF,CACT,C,wWCSaoB,EAAwB,WAMnC,IAkBSC,EAlBTC,GAAsCC,EAAAA,EAAAA,MAA9BC,EAAUF,EAAVE,WAAYC,EAAaH,EAAbG,cACZC,GAAeC,EAAAA,EAAAA,MAAfD,WACRE,GAA4CC,EAAAA,EAAAA,MAApCC,EAAYF,EAAZE,aAAcC,EAAiBH,EAAjBG,kBACtBlH,GAAkCC,EAAAA,EAAAA,YAA8BC,EAAAC,IAAAH,EAAA,GAAzDmH,EAASjH,EAAA,GAAEkH,EAAYlH,EAAA,GACxBmH,GAAwBC,EAAAA,EAAAA,GAAYL,EAAc,CAAEM,KAAM,MAEhEC,GAAsCC,EAAAA,EAAAA,GAAS,CAC7CC,SAAU,CACR,iBACAb,EACAF,EAAW7F,QACX6F,EAAWgB,SACXN,EACAF,GAEFS,gBAAiB,SAACC,GAAY,OAC5BA,QAAAA,EAAgB,CAAEjC,KAAM,GAAIkC,MAAO,EAAGC,aAAc,CAAC,EAAG,EAC1DC,OAAQ,EACRC,SAAOzB,EAAAjB,IAAAC,MAAAC,MAAE,SAAAC,IAAA,IAAAwC,EAAAC,EAAAvC,EAAAwC,EAAA,OAAA5C,MAAAK,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACgBqC,EAAAA,GAAUC,WAAW,CAC1CC,OAAQ1B,EACR2B,KAAM7B,EAAW7F,QACjB+C,KAAM8C,EAAWgB,SACjBc,cAAetB,EACfuB,SAAUzB,IACV,OANU,GAMVkB,EAAArC,EAAAK,KACgB,KAPVP,EAAIuC,EAAJvC,MAOCQ,KAAU,CAAAN,EAAAE,KAAA,QACI,OAAfoC,EAAMxC,EAAKA,KAAIE,EAAA6C,OAAA,SACd,CACL/C,KAAMwC,EAAIQ,OACVd,MAAOM,EAAIN,MACXC,aAAcK,EAAIS,MACnB,cAAA/C,EAAA6C,OAAA,SAIS,QAJTT,EAIDtC,aAAI,EAAJA,EAAMA,YAAI,IAAAsC,EAAAA,EAAI,CACZtC,KAAM,GACNkC,MAAO,EACPC,aAAc,CAAC,IAChB,wBAAAjC,EAAAQ,OAAA,GAAAZ,EAAA,KAEJ,kBAAAc,EAAAsC,MAAA,KAAAC,UAAA,KApCKnD,EAAI4B,EAAJ5B,KAAkBoD,EAAOxB,EAAnByB,WAuCRC,GAA4D5D,EAAAA,EAAAA,cAChE,SAAClD,GACCwE,EAAc,CAAE4B,KAAM,IACtBtB,EAAkB9E,EACpB,GACA,CAAC8E,EAAmBN,IAGhBuC,GAAqB7D,EAAAA,EAAAA,cACzB,SAAC8D,GACCxC,EAAc,CAAE4B,KAAM,IACtBpB,EAAagC,EACf,GACA,CAAChC,EAAcR,IAGjB,MAAO,CACLhB,KAAAA,EACAoD,QAAAA,EACArC,WAAAA,EACAC,cAAAA,EACAK,aAAAA,EACAC,kBAAmBgC,EACnB/B,UAAAA,EACAgC,mBAAAA,EAEJ,EAEaE,EAAqB,WAAM,IAAAC,EAEhC1D,GADc2D,EAAAA,EAAAA,MACKC,eAItB,CAAE9B,SAAU,CAAC,oBAEhB,OAAO9B,SAAY,QAAR0D,EAAJ1D,EAAM6D,IAAI,UAAE,IAAAH,OAAA,EAAZA,EAAe,EACxB,EAEaI,EAAiB,WAC5B,IAQYC,EARNC,GAAcL,EAAAA,EAAAA,MACZM,GAAwBC,EAAAA,EAAAA,MAAxBD,oBACRE,GAIIC,EAAAA,EAAAA,GAAY,CACdC,YAAa,CAAC,eACdC,YAAUP,EAAApE,IAAAC,MAAAC,MAAE,SAAA0E,EAAOC,GAA8C,IAAAC,EAAAzE,EAAA,OAAAJ,MAAAK,MAAA,SAAAyE,GAAA,cAAAA,EAAAvE,KAAAuE,EAAAtE,MAAA,cAAAsE,EAAAtE,KAAA,EACxCqC,EAAAA,GAAUkC,SAASH,GAAO,OAIhD,OAJgDC,EAAAC,EAAAnE,KAC/B,KADVP,EAAIyE,EAAJzE,MACCQ,OACPyD,EAAoB,GACpBD,EAAYY,kBAAkB,CAAE9C,SAAU,CAAC,qBAC5C4C,EAAA3B,OAAA,SACM/C,aAAI,EAAJA,EAAMQ,MAAI,wBAAAkE,EAAAhE,OAAA,GAAA6D,EAAA,KAClB,SAAAM,GAAA,OAAAd,EAAAb,MAAA,KAAAC,UAAA,KAGH,MAAO,CAAEnD,KAfHmE,EAAJnE,KAeaoD,QAdKe,EAAlBW,UAcsBC,YAbXZ,EAAXa,YAcJ,EAEaC,EAAiB,WAC5B,IAQYC,EARJC,GAAMC,EAAAA,EAAAA,MAAND,EACFnB,GAAcL,EAAAA,EAAAA,MACpB0B,GAIIjB,EAAAA,EAAAA,GAAY,CACdC,YAAa,CAAC,eACdC,YAAUY,EAAAvF,IAAAC,MAAAC,MAAE,SAAAyF,EAAOd,GAIlB,IAAAe,EAAAvF,EAAA,OAAAJ,MAAAK,MAAA,SAAAuF,GAAA,cAAAA,EAAArF,KAAAqF,EAAApF,MAAA,cAAAoF,EAAApF,KAAA,EACwBqC,EAAAA,GAAUgD,aAAajB,GAAO,OAIpD,OAJoDe,EAAAC,EAAAjF,KACnC,KADVP,EAAIuF,EAAJvF,MACCQ,OACPC,EAAAA,GAAQiF,QAAQP,EAAE,qBAClBnB,EAAYY,kBAAkB,CAAE9C,SAAU,CAAC,qBAC5C0D,EAAAzC,OAAA,SACM/C,aAAI,EAAJA,EAAMQ,MAAI,wBAAAgF,EAAA9E,OAAA,GAAA4E,EAAA,KAClB,SAAAK,GAAA,OAAAT,EAAAhC,MAAA,KAAAC,UAAA,KAGH,MAAO,CAAEnD,KAnBHqF,EAAJrF,KAmBaoD,QAlBKiC,EAAlBP,UAkBsBc,YAjBXP,EAAXL,YAkBJ,EAEaa,EAAiB,WAC5B,IASYC,EATJX,GAAMC,EAAAA,EAAAA,MAAND,EACFnB,GAAcL,EAAAA,EAAAA,MAEpBoC,GAII3B,EAAAA,EAAAA,GAAY,CACdC,YAAa,CAAC,eACdC,YAAUwB,EAAAnG,IAAAC,MAAAC,MAAE,SAAAmG,EAAOC,GAAY,IAAAC,EAAAC,EAAAnG,EAAA,OAAAJ,MAAAK,MAAA,SAAAmG,GAAA,cAAAA,EAAAjG,KAAAiG,EAAAhG,MAAA,OAI5B,OAHG8F,EAAUzD,EAAAA,GAAU4D,aACpBJ,EAAQK,WACVJ,EAAUzD,EAAAA,GAAU8D,WACrBH,EAAAhG,KAAA,EACsB8F,EAAQD,GAAQ,OAItC,OAJsCE,EAAAC,EAAA7F,KACrB,KADVP,EAAImG,EAAJnG,MACCQ,OACPC,EAAAA,GAAQiF,QAAQP,EAAE,oBAClBnB,EAAYY,kBAAkB,CAAE9C,SAAU,CAAC,qBAC5CsE,EAAArD,OAAA,SACM/C,aAAI,EAAJA,EAAMQ,MAAI,wBAAA4F,EAAA1F,OAAA,GAAAsF,EAAA,KAClB,SAAAQ,GAAA,OAAAV,EAAA5C,MAAA,KAAAC,UAAA,KAGH,MAAO,CAAEnD,KAnBH+F,EAAJ/F,KAmBaoD,QAlBK2C,EAAlBjB,UAkBsB2B,YAjBXV,EAAXf,YAkBJ,EAEa0B,EAAgB,SAACC,GAC5B,IAKSC,EALTC,GAAiBhF,EAAAA,EAAAA,GAAS,CACxBC,SAAU,CAAC,cACXgF,UAAWH,EACXI,YAAa,CAAC,EACd3E,OAAQ,EACRC,SAAOuE,EAAAjH,IAAAC,MAAAC,MAAE,SAAAmH,IAAA,IAAAhH,EAAA,OAAAJ,MAAAK,MAAA,SAAAgH,GAAA,cAAAA,EAAA9G,KAAA8G,EAAA7G,MAAA,cAAA6G,EAAA7G,KAAA,EACYqC,EAAAA,GAAUyE,UAAU,CACrCZ,SAAUK,IACV,OAFQ,OAAJ3G,EAAIiH,EAAA1G,KAAA0G,EAAAlE,OAAA,SAIH/C,GAAI,wBAAAiH,EAAAvG,OAAA,GAAAsG,EAAA,KACZ,kBAAAJ,EAAA1D,MAAA,KAAAC,UAAA,KAGH,OAdY0D,EAAJ7G,IAeV,C,yGC9MA,G,SAA+B,wB,WCiB/B,EAZkB,SAAHnG,GAA8C,IAAxCqC,EAAQrC,EAARqC,SACXiJ,GAAMgC,EAAAA,EAAAA,IAAa,eAAnBhC,EACR,OACEpJ,EAAAA,EAAAA,KAACqL,EAAAA,EAAI,CAACC,MAAM,SAASC,QAAQ,SAASlL,UAAWC,EAAoBH,UACnEH,EAAAA,EAAAA,KAACwL,EAAAA,EAAK,CACJhK,KAAK,QACLkD,SAAS1E,EAAAA,EAAAA,KAAA,MAAAG,SAAKA,GAAYiJ,EAAE,kBAIpC,C,8NCTaqC,EAAuB,SAClCC,EACAxJ,GACG,IAAAyJ,EACH,OAAO1K,MAAMC,QAAQwK,aAAa,EAAbA,EAAeE,YAClCF,EAAcE,UAAUC,OAAM,SAACC,GAAC,OAAK7K,MAAMC,QAAQ4K,EAAE,IACnDJ,SAAwB,QAAXC,EAAbD,EAAeE,iBAAS,IAAAD,OAAA,EAAxBA,EAA0BnM,KAAI,SAACsM,GAC7B,IAAMC,EAAe,CACnBjK,MAAOI,EAAKJ,MACZkK,OAAQ9J,EAAK8J,OACbC,GAAIH,EAAE,GACNI,GAAIJ,EAAE,GACNK,GAAIL,EAAE,GACNM,GAAIN,EAAE,IAER,MAAO,CACLtJ,IAAI6J,EAAAA,EAAAA,KACJC,QAAS,CACPC,KAAM,GACNC,MAAO,IAETnJ,QAAS,CACPkJ,MACEhI,EAAAA,EAAAA,KAAImH,EAAe,yBACnBnH,EAAAA,EAAAA,KAAImH,EAAe,UAAW,KAElCe,SAAU,CACRV,aAAcA,EACdW,MAAO,CAACX,GACRY,WAAYb,EAAE,IAGpB,IACA,EACN,EAIac,EAAe,SAACC,GAAY,IAAAC,EAAA,OACa,QADbA,EACvCD,aAAI,EAAJA,EAAME,MAAMF,EAAKG,YAAY,KAAO,GAAGC,qBAAa,IAAAH,EAAAA,EAAI,EAAE,EAM/CI,EAA2B,SAACxI,GACvC,OAAOA,EAAQnF,MAAM,MAAM4B,MAC7B,EAEagM,EAAiC,SAACC,GAC7C,OAAOC,EAAAA,GAA8BzN,SAASwN,EAChD,EAEaE,EAAU,SAACC,GACtB,MAAO,GAAA1N,OAAAC,IAAI0N,EAAAA,IAAM,CAAE,QAAOC,MAAK,SAAC3B,GAAC,OAAKA,IAAMyB,CAAK,GACnD,C,oFC9DIG,EAAYC,OAAOC,eACnBC,EAAsBF,OAAOG,sBAC7BC,EAAeJ,OAAOK,UAAUC,eAChCC,EAAeP,OAAOK,UAAUG,qBAChCC,EAAkB,CAACC,EAAKC,EAAKtQ,IAAUsQ,KAAOD,EAAMX,EAAUW,EAAKC,EAAK,CAAEC,YAAY,EAAMC,cAAc,EAAMC,UAAU,EAAMzQ,UAAWqQ,EAAIC,GAAOtQ,EAa1J,MAAM0Q,EAAajM,GAA0B,gBAAoB,MAZ5C,EAACgF,EAAGkH,KACvB,IAAK,IAAIC,KAAQD,IAAMA,EAAI,CAAC,GACtBZ,EAAac,KAAKF,EAAGC,IACvBR,EAAgB3G,EAAGmH,EAAMD,EAAEC,IAC/B,GAAIf,EACF,IAAK,IAAIe,KAAQf,EAAoBc,GAC/BT,EAAaW,KAAKF,EAAGC,IACvBR,EAAgB3G,EAAGmH,EAAMD,EAAEC,IAEjC,OAAOnH,CAAC,EAG8DqH,CAAe,CAAEhN,MAAO,GAAIkK,OAAQ,GAAI+C,KAAM,OAAQC,MAAO,8BAAgCvM,GAAwB,gBAAoB,OAAQ,CAAEwM,EAAG,6BAA8BC,OAAQ,UAAWC,YAAa,MAAOC,cAAe,QAASC,eAAgB,U","sources":["webpack:///./src/components/edit-tag/index.less?3847","webpack:///./src/components/edit-tag/index.tsx","webpack:///./src/components/image/index.less?25dc","webpack:///./src/components/image/index.tsx","webpack:///./src/components/pdf-previewer/hooks.ts","webpack:///./src/hooks/chunk-hooks.ts","webpack:///./src/pages/document-viewer/file-error/index.less?9a0d","webpack:///./src/pages/document-viewer/file-error/index.tsx","webpack:///./src/utils/document-util.ts","webpack:///./src/assets/filter.svg"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"tweenGroup\":\"tweenGroup___HgfIF\",\"tag\":\"tag___EPGvm\"};","import { PlusOutlined } from '@ant-design/icons';\nimport type { InputRef } from 'antd';\nimport { Input, Tag, theme, Tooltip } from 'antd';\nimport { TweenOneGroup } from 'rc-tween-one';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport styles from './index.less';\n\ninterface EditTagsProps {\n  value?: string[];\n  onChange?: (tags: string[]) => void;\n}\n\nconst EditTag = ({ value = [], onChange }: EditTagsProps) => {\n  const { token } = theme.useToken();\n  const [inputVisible, setInputVisible] = useState(false);\n  const [inputValue, setInputValue] = useState('');\n  const inputRef = useRef<InputRef>(null);\n\n  useEffect(() => {\n    if (inputVisible) {\n      inputRef.current?.focus();\n    }\n  }, [inputVisible]);\n\n  const handleClose = (removedTag: string) => {\n    const newTags = value?.filter((tag) => tag !== removedTag);\n    onChange?.(newTags ?? []);\n  };\n\n  const showInput = () => {\n    setInputVisible(true);\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(e.target.value);\n  };\n\n  const handleInputConfirm = () => {\n    if (inputValue && value) {\n      const newTags = inputValue\n        .split(';')\n        .map((tag) => tag.trim())\n        .filter((tag) => tag && !value.includes(tag));\n      onChange?.([...value, ...newTags]);\n    }\n    setInputVisible(false);\n    setInputValue('');\n  };\n\n  const forMap = (tag: string) => {\n    return (\n      <Tooltip title={tag}>\n        <Tag\n          key={tag}\n          className={styles.tag}\n          closable\n          onClose={(e) => {\n            e.preventDefault();\n            handleClose(tag);\n          }}\n        >\n          {tag}\n        </Tag>\n      </Tooltip>\n    );\n  };\n\n  const tagChild = value?.map(forMap);\n\n  const tagPlusStyle: React.CSSProperties = {\n    background: token.colorBgContainer,\n    borderStyle: 'dashed',\n  };\n\n  return (\n    <div>\n      {Array.isArray(tagChild) && tagChild.length > 0 && (\n        <TweenOneGroup\n          className={styles.tweenGroup}\n          enter={{\n            scale: 0.8,\n            opacity: 0,\n            type: 'from',\n            duration: 100,\n          }}\n          onEnd={(e) => {\n            if (e.type === 'appear' || e.type === 'enter') {\n              (e.target as any).style = 'display: inline-block';\n            }\n          }}\n          leave={{ opacity: 0, width: 0, scale: 0, duration: 200 }}\n          appear={false}\n        >\n          {tagChild}\n        </TweenOneGroup>\n      )}\n      {inputVisible ? (\n        <Input\n          ref={inputRef}\n          type=\"text\"\n          size=\"small\"\n          value={inputValue}\n          onChange={handleInputChange}\n          onBlur={handleInputConfirm}\n          onPressEnter={handleInputConfirm}\n        />\n      ) : (\n        <Tag onClick={showInput} style={tagPlusStyle}>\n          <PlusOutlined />\n        </Tag>\n      )}\n    </div>\n  );\n};\n\nexport default EditTag;\n","// extracted by mini-css-extract-plugin\nexport default {\"primitiveImg\":\"primitiveImg___VkCiH\",\"image\":\"image___BCkCB\",\"imagePreview\":\"imagePreview___qFyP3\"};","import { api_host } from '@/utils/api';\nimport { Popover } from 'antd';\nimport classNames from 'classnames';\n\nimport styles from './index.less';\n\ninterface IImage {\n  id: string;\n  className: string;\n  onClick?(): void;\n}\n\nconst Image = ({ id, className, ...props }: IImage) => {\n  return (\n    <img\n      {...props}\n      src={`${api_host}/document/image/${id}`}\n      alt=\"\"\n      className={classNames(styles.primitiveImg, className)}\n    />\n  );\n};\n\nexport default Image;\n\nexport const ImageWithPopover = ({ id }: { id: string }) => {\n  return (\n    <Popover\n      placement=\"left\"\n      content={<Image id={id} className={styles.imagePreview}></Image>}\n    >\n      <Image id={id} className={styles.image}></Image>\n    </Popover>\n  );\n};\n","import axios from 'axios';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport const useCatchDocumentError = (url: string) => {\n  const [error, setError] = useState<string>('');\n\n  const fetchDocument = useCallback(async () => {\n    const { data } = await axios.get(url);\n    if (data.code !== 0) {\n      setError(data?.message);\n    }\n  }, [url]);\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return error;\n};\n","import { ResponseGetType, ResponseType } from '@/interfaces/database/base';\nimport { IChunk, IKnowledgeFile } from '@/interfaces/database/knowledge';\nimport kbService from '@/services/knowledge-service';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useDebounce } from 'ahooks';\nimport { PaginationProps, message } from 'antd';\nimport { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  useGetPaginationWithRouter,\n  useHandleSearchChange,\n} from './logic-hooks';\nimport {\n  useGetKnowledgeSearchParams,\n  useSetPaginationParams,\n} from './route-hook';\n\nexport interface IChunkListResult {\n  searchString?: string;\n  handleInputChange?: React.ChangeEventHandler<HTMLInputElement>;\n  pagination: PaginationProps;\n  setPagination?: (pagination: { page: number; pageSize: number }) => void;\n  available: number | undefined;\n  handleSetAvailable: (available: number | undefined) => void;\n}\n\nexport const useFetchNextChunkList = (): ResponseGetType<{\n  data: IChunk[];\n  total: number;\n  documentInfo: IKnowledgeFile;\n}> &\n  IChunkListResult => {\n  const { pagination, setPagination } = useGetPaginationWithRouter();\n  const { documentId } = useGetKnowledgeSearchParams();\n  const { searchString, handleInputChange } = useHandleSearchChange();\n  const [available, setAvailable] = useState<number | undefined>();\n  const debouncedSearchString = useDebounce(searchString, { wait: 500 });\n\n  const { data, isFetching: loading } = useQuery({\n    queryKey: [\n      'fetchChunkList',\n      documentId,\n      pagination.current,\n      pagination.pageSize,\n      debouncedSearchString,\n      available,\n    ],\n    placeholderData: (previousData) =>\n      previousData ?? { data: [], total: 0, documentInfo: {} }, // https://github.com/TanStack/query/issues/8183\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await kbService.chunk_list({\n        doc_id: documentId,\n        page: pagination.current,\n        size: pagination.pageSize,\n        available_int: available,\n        keywords: searchString,\n      });\n      if (data.code === 0) {\n        const res = data.data;\n        return {\n          data: res.chunks,\n          total: res.total,\n          documentInfo: res.doc,\n        };\n      }\n\n      return (\n        data?.data ?? {\n          data: [],\n          total: 0,\n          documentInfo: {},\n        }\n      );\n    },\n  });\n\n  const onInputChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      setPagination({ page: 1 });\n      handleInputChange(e);\n    },\n    [handleInputChange, setPagination],\n  );\n\n  const handleSetAvailable = useCallback(\n    (a: number | undefined) => {\n      setPagination({ page: 1 });\n      setAvailable(a);\n    },\n    [setAvailable, setPagination],\n  );\n\n  return {\n    data,\n    loading,\n    pagination,\n    setPagination,\n    searchString,\n    handleInputChange: onInputChange,\n    available,\n    handleSetAvailable,\n  };\n};\n\nexport const useSelectChunkList = () => {\n  const queryClient = useQueryClient();\n  const data = queryClient.getQueriesData<{\n    data: IChunk[];\n    total: number;\n    documentInfo: IKnowledgeFile;\n  }>({ queryKey: ['fetchChunkList'] });\n\n  return data?.at(-1)?.[1];\n};\n\nexport const useDeleteChunk = () => {\n  const queryClient = useQueryClient();\n  const { setPaginationParams } = useSetPaginationParams();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['deleteChunk'],\n    mutationFn: async (params: { chunkIds: string[]; doc_id: string }) => {\n      const { data } = await kbService.rm_chunk(params);\n      if (data.code === 0) {\n        setPaginationParams(1);\n        queryClient.invalidateQueries({ queryKey: ['fetchChunkList'] });\n      }\n      return data?.code;\n    },\n  });\n\n  return { data, loading, deleteChunk: mutateAsync };\n};\n\nexport const useSwitchChunk = () => {\n  const { t } = useTranslation();\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['switchChunk'],\n    mutationFn: async (params: {\n      chunk_ids?: string[];\n      available_int?: number;\n      doc_id: string;\n    }) => {\n      const { data } = await kbService.switch_chunk(params);\n      if (data.code === 0) {\n        message.success(t('message.modified'));\n        queryClient.invalidateQueries({ queryKey: ['fetchChunkList'] });\n      }\n      return data?.code;\n    },\n  });\n\n  return { data, loading, switchChunk: mutateAsync };\n};\n\nexport const useCreateChunk = () => {\n  const { t } = useTranslation();\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['createChunk'],\n    mutationFn: async (payload: any) => {\n      let service = kbService.create_chunk;\n      if (payload.chunk_id) {\n        service = kbService.set_chunk;\n      }\n      const { data } = await service(payload);\n      if (data.code === 0) {\n        message.success(t('message.created'));\n        queryClient.invalidateQueries({ queryKey: ['fetchChunkList'] });\n      }\n      return data?.code;\n    },\n  });\n\n  return { data, loading, createChunk: mutateAsync };\n};\n\nexport const useFetchChunk = (chunkId?: string): ResponseType<any> => {\n  const { data } = useQuery({\n    queryKey: ['fetchChunk'],\n    enabled: !!chunkId,\n    initialData: {},\n    gcTime: 0,\n    queryFn: async () => {\n      const data = await kbService.get_chunk({\n        chunk_id: chunkId,\n      });\n\n      return data;\n    },\n  });\n\n  return data;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/common-hooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n","import { Images, SupportedPreviewDocumentTypes } from '@/constants/common';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { UploadFile } from 'antd';\nimport { get } from 'lodash';\nimport { v4 as uuid } from 'uuid';\n\nexport const buildChunkHighlights = (\n  selectedChunk: IChunk | IReferenceChunk,\n  size: { width: number; height: number },\n) => {\n  return Array.isArray(selectedChunk?.positions) &&\n    selectedChunk.positions.every((x) => Array.isArray(x))\n    ? selectedChunk?.positions?.map((x) => {\n        const boundingRect = {\n          width: size.width,\n          height: size.height,\n          x1: x[1],\n          x2: x[2],\n          y1: x[3],\n          y2: x[4],\n        };\n        return {\n          id: uuid(),\n          comment: {\n            text: '',\n            emoji: '',\n          },\n          content: {\n            text:\n              get(selectedChunk, 'content_with_weight') ||\n              get(selectedChunk, 'content', ''),\n          },\n          position: {\n            boundingRect: boundingRect,\n            rects: [boundingRect],\n            pageNumber: x[0],\n          },\n        };\n      })\n    : [];\n};\n\nexport const isFileUploadDone = (file: UploadFile) => file.status === 'done';\n\nexport const getExtension = (name: string) =>\n  name?.slice(name.lastIndexOf('.') + 1).toLowerCase() ?? '';\n\nexport const isPdf = (name: string) => {\n  return getExtension(name) === 'pdf';\n};\n\nexport const getUnSupportedFilesCount = (message: string) => {\n  return message.split('\\n').length;\n};\n\nexport const isSupportedPreviewDocumentType = (fileExtension: string) => {\n  return SupportedPreviewDocumentTypes.includes(fileExtension);\n};\n\nexport const isImage = (image: string) => {\n  return [...Images, 'svg'].some((x) => x === image);\n};\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgFilter = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 20, height: 20, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"M5 10h10M2.5 5h15m-10 10h5\", stroke: \"#344054\", strokeWidth: 1.667, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgFilter as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTUgMTBoMTBNMi41IDVoMTVtLTEwIDEwaDUiIHN0cm9rZT0iIzM0NDA1NCIgc3Ryb2tlLXdpZHRoPSIxLjY2NyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+\";\n"],"names":["_ref","_ref$value","value","onChange","token","theme","useToken","_useState","useState","_useState2","_slicedToArray","inputVisible","setInputVisible","_useState3","_useState4","inputValue","setInputValue","inputRef","useRef","useEffect","_inputRef$current","current","focus","handleInputConfirm","newTags","split","map","tag","trim","filter","includes","concat","_toConsumableArray","tagChild","_jsx","Tooltip","title","children","Tag","className","styles","closable","onClose","e","removedTag","preventDefault","tagPlusStyle","background","colorBgContainer","borderStyle","_jsxs","Array","isArray","length","TweenOneGroup","enter","scale","opacity","type","duration","onEnd","target","style","leave","width","appear","Input","ref","size","onBlur","onPressEnter","onClick","PlusOutlined","Image","id","props","_objectWithoutProperties","_excluded","_objectSpread","src","api_host","alt","classNames","ImageWithPopover","_ref2","Popover","placement","content","useCatchDocumentError","url","error","setError","fetchDocument","useCallback","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_context","prev","next","axios","get","sent","code","message","stop","useFetchNextChunkList","_queryFn","_useGetPaginationWith","useGetPaginationWithRouter","pagination","setPagination","documentId","useGetKnowledgeSearchParams","_useHandleSearchChang","useHandleSearchChange","searchString","handleInputChange","available","setAvailable","debouncedSearchString","useDebounce","wait","_useQuery","useQuery","queryKey","pageSize","placeholderData","previousData","total","documentInfo","gcTime","queryFn","_data$data","_yield$kbService$chun","res","kbService","chunk_list","doc_id","page","available_int","keywords","abrupt","chunks","doc","apply","arguments","loading","isFetching","onInputChange","handleSetAvailable","a","useSelectChunkList","_data$at","useQueryClient","getQueriesData","at","useDeleteChunk","_mutationFn","queryClient","setPaginationParams","useSetPaginationParams","_useMutation","useMutation","mutationKey","mutationFn","_callee2","params","_yield$kbService$rm_c","_context2","rm_chunk","invalidateQueries","_x","isPending","deleteChunk","mutateAsync","useSwitchChunk","_mutationFn2","t","useTranslation","_useMutation2","_callee3","_yield$kbService$swit","_context3","switch_chunk","success","_x2","switchChunk","useCreateChunk","_mutationFn3","_useMutation3","_callee4","payload","service","_yield$service","_context4","create_chunk","chunk_id","set_chunk","_x3","createChunk","useFetchChunk","chunkId","_queryFn2","_useQuery2","enabled","initialData","_callee5","_context5","get_chunk","useTranslate","Flex","align","justify","Alert","buildChunkHighlights","selectedChunk","_selectedChunk$positi","positions","every","x","boundingRect","height","x1","x2","y1","y2","uuid","comment","text","emoji","position","rects","pageNumber","getExtension","name","_name$slice$toLowerCa","slice","lastIndexOf","toLowerCase","getUnSupportedFilesCount","isSupportedPreviewDocumentType","fileExtension","SupportedPreviewDocumentTypes","isImage","image","Images","some","__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","enumerable","configurable","writable","SvgFilter","b","prop","call","__spreadValues","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sourceRoot":""}