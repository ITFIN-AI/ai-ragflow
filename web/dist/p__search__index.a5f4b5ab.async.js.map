{"version":3,"file":"p__search__index.a5f4b5ab.async.js","mappings":"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","sources":["webpack:///./src/components/file-icon/index.less?cab7","webpack:///./src/components/file-icon/index.tsx","webpack:///./src/components/highlight-markdown/index.less?13d5","webpack:///./src/components/highlight-markdown/index.tsx","webpack:///./src/components/image/index.less?25dc","webpack:///./src/components/image/index.tsx","webpack:///./src/components/indented-tree/indented-tree.tsx","webpack:///./src/components/new-document-link.tsx","webpack:///./src/components/pdf-drawer/hooks.ts","webpack:///./src/components/pdf-previewer/index.less?80cf","webpack:///./src/components/pdf-previewer/index.tsx","webpack:///./src/components/pdf-drawer/index.tsx","webpack:///./src/components/pdf-previewer/hooks.ts","webpack:///./src/pages/chat/markdown-content/index.less?ed51","webpack:///./src/pages/chat/markdown-content/index.tsx","webpack:///./src/pages/chat/utils.ts","webpack:///./src/pages/document-viewer/file-error/index.less?9a0d","webpack:///./src/pages/document-viewer/file-error/index.tsx","webpack:///./src/components/retrieval-documents/select-files.tsx","webpack:///./src/components/retrieval-documents/index.less?a74b","webpack:///./src/components/retrieval-documents/index.tsx","webpack:///./src/pages/search/index.less?2702","webpack:///./src/pages/search/mindmap-drawer.tsx","webpack:///./src/pages/search/hooks.ts","webpack:///./src/pages/search/sidebar.tsx","webpack:///./src/pages/search/index.tsx","webpack:///./src/assets/svg/selected-files-collapse.svg"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"thumbnailImg\":\"thumbnailImg___cbGoI\"};","import { getExtension } from '@/utils/document-util';\nimport SvgIcon from '../svg-icon';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useEffect } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  name: string;\n  id: string;\n}\n\nconst FileIcon = ({ name, id }: IProps) => {\n  const fileExtension = getExtension(name);\n\n  const { data: fileThumbnails, setDocumentIds } =\n    useFetchDocumentThumbnailsByIds();\n  const fileThumbnail = fileThumbnails[id];\n\n  useEffect(() => {\n    if (id) {\n      setDocumentIds([id]);\n    }\n  }, [id, setDocumentIds]);\n\n  return fileThumbnail ? (\n    <img src={fileThumbnail} className={styles.thumbnailImg}></img>\n  ) : (\n    <SvgIcon name={`file-icon/${fileExtension}`} width={24}></SvgIcon>\n  );\n};\n\nexport default FileIcon;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"text___QzeTq\",\"code\":\"code___dMLXp\"};","import classNames from 'classnames';\nimport Markdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport { preprocessLaTeX } from '@/utils/chat';\nimport styles from './index.less';\n\nconst HightLightMarkdown = ({\n  children,\n}: {\n  children: string | null | undefined;\n}) => {\n  return (\n    <Markdown\n      remarkPlugins={[remarkGfm, remarkMath]}\n      rehypePlugins={[rehypeRaw, rehypeKatex]}\n      className={classNames(styles.text)}\n      components={\n        {\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter\n                {...rest}\n                PreTag=\"div\"\n                language={match[1]}\n                // style={dark}\n              >\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={`${className} ${styles.code}`}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {children ? preprocessLaTeX(children) : children}\n    </Markdown>\n  );\n};\n\nexport default HightLightMarkdown;\n","// extracted by mini-css-extract-plugin\nexport default {\"primitiveImg\":\"primitiveImg___VkCiH\",\"image\":\"image___BCkCB\",\"imagePreview\":\"imagePreview___qFyP3\"};","import { api_host } from '@/utils/api';\nimport { Popover } from 'antd';\nimport classNames from 'classnames';\n\nimport styles from './index.less';\n\ninterface IImage {\n  id: string;\n  className: string;\n  onClick?(): void;\n}\n\nconst Image = ({ id, className, ...props }: IImage) => {\n  return (\n    <img\n      {...props}\n      src={`${api_host}/document/image/${id}`}\n      alt=\"\"\n      className={classNames(styles.primitiveImg, className)}\n    />\n  );\n};\n\nexport default Image;\n\nexport const ImageWithPopover = ({ id }: { id: string }) => {\n  return (\n    <Popover\n      placement=\"left\"\n      content={<Image id={id} className={styles.imagePreview}></Image>}\n    >\n      <Image id={id} className={styles.image}></Image>\n    </Popover>\n  );\n};\n","import { Rect } from '@antv/g';\nimport {\n  Badge,\n  BaseBehavior,\n  BaseNode,\n  CommonEvent,\n  ExtensionCategory,\n  Graph,\n  NodeEvent,\n  Point,\n  Polyline,\n  PolylineStyleProps,\n  register,\n  subStyleProps,\n  treeToGraphData,\n} from '@antv/g6';\nimport { TreeData } from '@antv/g6/lib/types';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { ErrorBoundary, FallbackProps } from 'react-error-boundary';\n\nconst rootId = 'root';\n\nconst COLORS = [\n  '#5B8FF9',\n  '#F6BD16',\n  '#5AD8A6',\n  '#945FB9',\n  '#E86452',\n  '#6DC8EC',\n  '#FF99C3',\n  '#1E9493',\n  '#FF9845',\n  '#5D7092',\n];\n\nconst TreeEvent = {\n  COLLAPSE_EXPAND: 'collapse-expand',\n  WHEEL: 'canvas:wheel',\n};\n\nclass IndentedNode extends BaseNode {\n  static defaultStyleProps = {\n    ports: [\n      {\n        key: 'in',\n        placement: 'right-bottom',\n      },\n      {\n        key: 'out',\n        placement: 'left-bottom',\n      },\n    ],\n  } as any;\n\n  constructor(options: any) {\n    Object.assign(options.style, IndentedNode.defaultStyleProps);\n    super(options);\n  }\n\n  get childrenData() {\n    return this.attributes.context?.model.getChildrenData(this.id);\n  }\n\n  getKeyStyle(attributes: any) {\n    const [width, height] = this.getSize(attributes);\n    const keyStyle = super.getKeyStyle(attributes);\n    return {\n      width,\n      height,\n      ...keyStyle,\n      fill: 'transparent',\n    };\n  }\n\n  drawKeyShape(attributes: any, container: any) {\n    const keyStyle = this.getKeyStyle(attributes);\n    return this.upsert('key', Rect, keyStyle, container);\n  }\n\n  getLabelStyle(attributes: any) {\n    if (attributes.label === false || !attributes.labelText) return false;\n    return subStyleProps(this.getGraphicStyle(attributes), 'label') as any;\n  }\n\n  drawIconArea(attributes: any, container: any) {\n    const [, h] = this.getSize(attributes);\n    const iconAreaStyle = {\n      fill: 'transparent',\n      height: 30,\n      width: 12,\n      x: -6,\n      y: h,\n      zIndex: -1,\n    };\n    this.upsert('icon-area', Rect, iconAreaStyle, container);\n  }\n\n  forwardEvent(target: any, type: any, listener: any) {\n    if (target && !Reflect.has(target, '__bind__')) {\n      Reflect.set(target, '__bind__', true);\n      target.addEventListener(type, listener);\n    }\n  }\n\n  getCountStyle(attributes: any) {\n    const { collapsed, color } = attributes;\n    if (collapsed) {\n      const [, height] = this.getSize(attributes);\n      return {\n        backgroundFill: color,\n        cursor: 'pointer',\n        fill: '#fff',\n        fontSize: 8,\n        padding: [0, 10],\n        text: `${this.childrenData?.length}`,\n        textAlign: 'center',\n        y: height + 8,\n      };\n    }\n\n    return false;\n  }\n\n  drawCountShape(attributes: any, container: any) {\n    const countStyle = this.getCountStyle(attributes);\n    const btn = this.upsert('count', Badge, countStyle as any, container);\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: false,\n      });\n    });\n  }\n\n  isShowCollapse(attributes: any) {\n    return (\n      !attributes.collapsed &&\n      Array.isArray(this.childrenData) &&\n      this.childrenData?.length > 0\n    );\n  }\n\n  getCollapseStyle(attributes: any) {\n    const { showIcon, color } = attributes;\n    if (!this.isShowCollapse(attributes)) return false;\n    const [, height] = this.getSize(attributes);\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: color,\n      backgroundHeight: 12,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: '#fff',\n      fontFamily: 'iconfont',\n      fontSize: 8,\n      text: '\\ue6e4',\n      textAlign: 'center',\n      x: -1, // half of edge line width\n      y: height + 8,\n    };\n  }\n\n  drawCollapseShape(attributes: any, container: any) {\n    const iconStyle = this.getCollapseStyle(attributes);\n    const btn = this.upsert(\n      'collapse-expand',\n      Badge,\n      iconStyle as any,\n      container,\n    );\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: !attributes.collapsed,\n      });\n    });\n  }\n\n  getAddStyle(attributes: any) {\n    const { collapsed, showIcon } = attributes;\n    if (collapsed) return false;\n    const [, height] = this.getSize(attributes);\n    const color = '#ddd';\n    const lineWidth = 1;\n\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: '#fff',\n      backgroundHeight: 12,\n      backgroundLineWidth: lineWidth,\n      backgroundStroke: color,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: color,\n      fontFamily: 'iconfont',\n      text: '\\ue664',\n      textAlign: 'center',\n      x: -1,\n      y: height + (this.isShowCollapse(attributes) ? 22 : 8),\n    };\n  }\n\n  render(attributes = this.parsedAttributes, container = this) {\n    super.render(attributes, container);\n\n    this.drawCountShape(attributes, container);\n\n    this.drawIconArea(attributes, container);\n    this.drawCollapseShape(attributes, container);\n  }\n}\n\nclass IndentedEdge extends Polyline {\n  getControlPoints(\n    attributes: Required<PolylineStyleProps>,\n    sourcePoint: Point,\n    targetPoint: Point,\n  ) {\n    const [sx] = sourcePoint;\n    const [, ty] = targetPoint;\n    return [[sx, ty]] as any;\n  }\n}\n\nclass CollapseExpandTree extends BaseBehavior {\n  constructor(context: any, options: any) {\n    super(context, options);\n    this.bindEvents();\n  }\n\n  update(options: any) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.on(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.on(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.off(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.off(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  status = 'idle';\n\n  showIcon = (event: any) => {\n    this.setIcon(event, true);\n  };\n\n  hideIcon = (event: any) => {\n    this.setIcon(event, false);\n  };\n\n  setIcon = (event: any, show: boolean) => {\n    if (this.status !== 'idle') return;\n    const { target } = event;\n    const id = target.id;\n    const { graph, element } = this.context;\n    graph.updateNodeData([{ id, style: { showIcon: show } }]);\n    element?.draw({ animation: false, silence: true });\n  };\n\n  onCollapseExpand = async (event: any) => {\n    this.status = 'busy';\n    const { id, collapsed } = event;\n    const { graph } = this.context;\n    if (collapsed) await graph.collapseElement(id);\n    else await graph.expandElement(id);\n    this.status = 'idle';\n  };\n}\n\nregister(ExtensionCategory.NODE, 'indented', IndentedNode);\nregister(ExtensionCategory.EDGE, 'indented', IndentedEdge);\nregister(\n  ExtensionCategory.BEHAVIOR,\n  'collapse-expand-tree',\n  CollapseExpandTree,\n);\n\ninterface IProps {\n  data: TreeData;\n  show: boolean;\n  style?: React.CSSProperties;\n}\n\nfunction fallbackRender({ error }: FallbackProps) {\n  // Call resetErrorBoundary() to reset the error boundary and retry the render.\n\n  return (\n    <div role=\"alert\">\n      <p>Something went wrong:</p>\n      <pre style={{ color: 'red' }}>{error.message}</pre>\n    </div>\n  );\n}\n\nconst IndentedTree = ({ data, show, style = {} }: IProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const graphRef = useRef<Graph | null>(null);\n  const assignIds = React.useCallback(function assignIds(\n    node: TreeData,\n    parentId: string = '',\n    index = 0,\n  ) {\n    if (!node.id) node.id = parentId ? `${parentId}-${index}` : 'root';\n    if (node.children) {\n      node.children.forEach((child, idx) => assignIds(child, node.id, idx));\n    }\n  }, []);\n\n  const render = useCallback(\n    async (data: TreeData) => {\n      const graph: Graph = new Graph({\n        container: containerRef.current!,\n        x: 60,\n        node: {\n          type: 'indented',\n          style: {\n            size: (d) => [d.id.length * 6 + 10, 20],\n            labelBackground: (datum) => datum.id === rootId,\n            labelBackgroundRadius: 0,\n            labelBackgroundFill: '#576286',\n            labelFill: (datum) => (datum.id === rootId ? '#fff' : '#666'),\n            labelText: (d) => d.style?.labelText || d.id,\n            labelTextAlign: (datum) =>\n              datum.id === rootId ? 'center' : 'left',\n            labelTextBaseline: 'top',\n            color: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.id, 'tree').length - 1;\n              return COLORS[depth % COLORS.length] || '#576286';\n            },\n          },\n          state: {\n            selected: {\n              lineWidth: 0,\n              labelFill: '#40A8FF',\n              labelBackground: true,\n              labelFontWeight: 'normal',\n              labelBackgroundFill: '#e8f7ff',\n              labelBackgroundRadius: 10,\n            },\n          },\n        },\n        edge: {\n          type: 'indented',\n          style: {\n            radius: 16,\n            lineWidth: 2,\n            sourcePort: 'out',\n            targetPort: 'in',\n            stroke: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.source, 'tree').length;\n              return COLORS[depth % COLORS.length] || 'black';\n            },\n          },\n        },\n        layout: {\n          type: 'indented',\n          direction: 'LR',\n          isHorizontal: true,\n          indent: 40,\n          getHeight: () => 20,\n          getVGap: () => 10,\n        },\n        behaviors: [\n          'scroll-canvas',\n          'collapse-expand-tree',\n          {\n            type: 'click-select',\n            enable: (event: any) =>\n              event.targetType === 'node' && event.target.id !== rootId,\n          },\n        ],\n      });\n\n      if (graphRef.current) {\n        graphRef.current.destroy();\n      }\n\n      graphRef.current = graph;\n\n      assignIds(data);\n\n      graph?.setData(treeToGraphData(data));\n\n      graph?.render();\n    },\n    [assignIds],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      render(data);\n    }\n  }, [render, data]);\n\n  return (\n    <ErrorBoundary fallbackRender={fallbackRender}>\n      <div\n        id=\"tree\"\n        ref={containerRef}\n        style={{\n          width: '90vw',\n          height: '80vh',\n          display: show ? 'block' : 'none',\n          ...style,\n        }}\n      />\n    </ErrorBoundary>\n  );\n};\n\nexport default IndentedTree;\n","import {\n  getExtension,\n  isSupportedPreviewDocumentType,\n} from '@/utils/document-util';\nimport React from 'react';\n\ninterface IProps extends React.PropsWithChildren {\n  link?: string;\n  preventDefault?: boolean;\n  color?: string;\n  documentName: string;\n  documentId?: string;\n  prefix?: string;\n  className?: string;\n}\n\nconst NewDocumentLink = ({\n  children,\n  link,\n  preventDefault = false,\n  color = 'rgb(15, 79, 170)',\n  documentId,\n  documentName,\n  prefix = 'file',\n  className,\n}: IProps) => {\n  let nextLink = link;\n  const extension = getExtension(documentName);\n  if (!link) {\n    nextLink = `/document/${documentId}?ext=${extension}&prefix=${prefix}`;\n  }\n\n  return (\n    <a\n      target=\"_blank\"\n      onClick={\n        !preventDefault || isSupportedPreviewDocumentType(extension)\n          ? undefined\n          : (e) => e.preventDefault()\n      }\n      href={nextLink}\n      rel=\"noreferrer\"\n      style={{ color: className ? '' : color, wordBreak: 'break-all' }}\n      className={className}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default NewDocumentLink;\n","import { useSetModalState } from '@/hooks/common-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { useCallback, useState } from 'react';\n\nexport const useClickDrawer = () => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const [selectedChunk, setSelectedChunk] = useState<IReferenceChunk>(\n    {} as IReferenceChunk,\n  );\n  const [documentId, setDocumentId] = useState<string>('');\n\n  const clickDocumentButton = useCallback(\n    (documentId: string, chunk: IReferenceChunk) => {\n      showModal();\n      setSelectedChunk(chunk);\n      setDocumentId(documentId);\n    },\n    [showModal],\n  );\n\n  return {\n    clickDocumentButton,\n    visible,\n    showModal,\n    hideModal,\n    selectedChunk,\n    documentId,\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"documentContainer\":\"documentContainer___kWzt7\"};","import {\n  useGetChunkHighlights,\n  useGetDocumentUrl,\n} from '@/hooks/document-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport FileError from '@/pages/document-viewer/file-error';\nimport { Skeleton } from 'antd';\nimport { useEffect, useRef, useState } from 'react';\nimport {\n  AreaHighlight,\n  Highlight,\n  IHighlight,\n  PdfHighlighter,\n  PdfLoader,\n  Popup,\n} from 'react-pdf-highlighter';\nimport { useCatchDocumentError } from './hooks';\n\nimport styles from './index.less';\n\ninterface IProps {\n  chunk: IChunk | IReferenceChunk;\n  documentId: string;\n  visible: boolean;\n}\n\nconst HighlightPopup = ({\n  comment,\n}: {\n  comment: { text: string; emoji: string };\n}) =>\n  comment.text ? (\n    <div className=\"Highlight__popup\">\n      {comment.emoji} {comment.text}\n    </div>\n  ) : null;\n\nconst DocumentPreviewer = ({ chunk, documentId, visible }: IProps) => {\n  const getDocumentUrl = useGetDocumentUrl(documentId);\n  const { highlights: state, setWidthAndHeight } = useGetChunkHighlights(chunk);\n  const ref = useRef<(highlight: IHighlight) => void>(() => {});\n  const [loaded, setLoaded] = useState(false);\n  const url = getDocumentUrl();\n  const error = useCatchDocumentError(url);\n\n  const resetHash = () => {};\n\n  useEffect(() => {\n    setLoaded(visible);\n  }, [visible]);\n\n  useEffect(() => {\n    if (state.length > 0 && loaded) {\n      setLoaded(false);\n      ref.current(state[0]);\n    }\n  }, [state, loaded]);\n\n  return (\n    <div className={styles.documentContainer}>\n      <PdfLoader\n        url={url}\n        beforeLoad={<Skeleton active />}\n        workerSrc=\"/pdfjs-dist/pdf.worker.min.js\"\n        errorMessage={<FileError>{error}</FileError>}\n      >\n        {(pdfDocument) => {\n          pdfDocument.getPage(1).then((page) => {\n            const viewport = page.getViewport({ scale: 1 });\n            const width = viewport.width;\n            const height = viewport.height;\n            setWidthAndHeight(width, height);\n          });\n\n          return (\n            <PdfHighlighter\n              pdfDocument={pdfDocument}\n              enableAreaSelection={(event) => event.altKey}\n              onScrollChange={resetHash}\n              scrollRef={(scrollTo) => {\n                ref.current = scrollTo;\n                setLoaded(true);\n              }}\n              onSelectionFinished={() => null}\n              highlightTransform={(\n                highlight,\n                index,\n                setTip,\n                hideTip,\n                viewportToScaled,\n                screenshot,\n                isScrolledTo,\n              ) => {\n                const isTextHighlight = !Boolean(\n                  highlight.content && highlight.content.image,\n                );\n\n                const component = isTextHighlight ? (\n                  <Highlight\n                    isScrolledTo={isScrolledTo}\n                    position={highlight.position}\n                    comment={highlight.comment}\n                  />\n                ) : (\n                  <AreaHighlight\n                    isScrolledTo={isScrolledTo}\n                    highlight={highlight}\n                    onChange={() => {}}\n                  />\n                );\n\n                return (\n                  <Popup\n                    popupContent={<HighlightPopup {...highlight} />}\n                    onMouseOver={(popupContent) =>\n                      setTip(highlight, () => popupContent)\n                    }\n                    onMouseOut={hideTip}\n                    key={index}\n                  >\n                    {component}\n                  </Popup>\n                );\n              }}\n              highlights={state}\n            />\n          );\n        }}\n      </PdfLoader>\n    </div>\n  );\n};\n\nexport default DocumentPreviewer;\n","import { IModalProps } from '@/interfaces/common';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { Drawer } from 'antd';\nimport DocumentPreviewer from '../pdf-previewer';\n\ninterface IProps extends IModalProps<any> {\n  documentId: string;\n  chunk: IChunk | IReferenceChunk;\n}\n\nexport const PdfDrawer = ({\n  visible = false,\n  hideModal,\n  documentId,\n  chunk,\n}: IProps) => {\n  return (\n    <Drawer\n      title=\"Document Previewer\"\n      onClose={hideModal}\n      open={visible}\n      width={'50vw'}\n    >\n      <DocumentPreviewer\n        documentId={documentId}\n        chunk={chunk}\n        visible={visible}\n      ></DocumentPreviewer>\n    </Drawer>\n  );\n};\n\nexport default PdfDrawer;\n","import axios from 'axios';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport const useCatchDocumentError = (url: string) => {\n  const [error, setError] = useState<string>('');\n\n  const fetchDocument = useCallback(async () => {\n    const { data } = await axios.get(url);\n    if (data.code !== 0) {\n      setError(data?.message);\n    }\n  }, [url]);\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return error;\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"markdownContentWrapper\":\"markdownContentWrapper___geQCE\",\"referencePopoverWrapper\":\"referencePopoverWrapper___rn9A6\",\"referenceChunkImage\":\"referenceChunkImage___LoR67\",\"referenceInnerChunkImage\":\"referenceInnerChunkImage___WGd3z\",\"referenceImagePreview\":\"referenceImagePreview___kcQgd\",\"chunkContentText\":\"chunkContentText___vcP0P\",\"documentLink\":\"documentLink___USud0\",\"referenceIcon\":\"referenceIcon___g5Mgk\",\"cursor\":\"cursor___rRuWB\",\"blink\":\"blink___BYl7u\",\"fileThumbnail\":\"fileThumbnail___BzBir\"};","import Image from '@/components/image';\nimport SvgIcon from '@/components/svg-icon';\nimport { IReference, IReferenceChunk } from '@/interfaces/database/chat';\nimport { getExtension } from '@/utils/document-util';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { Button, Flex, Popover } from 'antd';\nimport DOMPurify from 'dompurify';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport Markdown from 'react-markdown';\nimport reactStringReplace from 'react-string-replace';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\nimport { visitParents } from 'unist-util-visit-parents';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useTranslation } from 'react-i18next';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport {\n  preprocessLaTeX,\n  replaceThinkToSection,\n  showImage,\n} from '@/utils/chat';\nimport { currentReg, replaceTextByOldReg } from '../utils';\n\nimport classNames from 'classnames';\nimport { pipe } from 'lodash/fp';\nimport styles from './index.less';\n\nconst getChunkIndex = (match: string) => Number(match.slice(2, -2));\n// TODO: The display of the table is inconsistent with the display previously placed in the MessageItem.\nconst MarkdownContent = ({\n  reference,\n  clickDocumentButton,\n  content,\n}: {\n  content: string;\n  loading: boolean;\n  reference: IReference;\n  clickDocumentButton?: (documentId: string, chunk: IReferenceChunk) => void;\n}) => {\n  const { t } = useTranslation();\n  const { setDocumentIds, data: fileThumbnails } =\n    useFetchDocumentThumbnailsByIds();\n  const contentWithCursor = useMemo(() => {\n    // let text = DOMPurify.sanitize(content);\n    let text = content;\n    if (text === '') {\n      text = t('chat.searching');\n    }\n    const nextText = replaceTextByOldReg(text);\n    return pipe(replaceThinkToSection, preprocessLaTeX)(nextText);\n  }, [content, t]);\n\n  useEffect(() => {\n    const docAggs = reference?.doc_aggs;\n    setDocumentIds(Array.isArray(docAggs) ? docAggs.map((x) => x.doc_id) : []);\n  }, [reference, setDocumentIds]);\n\n  const handleDocumentButtonClick = useCallback(\n    (\n      documentId: string,\n      chunk: IReferenceChunk,\n      isPdf: boolean,\n      documentUrl?: string,\n    ) =>\n      () => {\n        if (!isPdf) {\n          if (!documentUrl) {\n            return;\n          }\n          window.open(documentUrl, '_blank');\n        } else {\n          clickDocumentButton?.(documentId, chunk);\n        }\n      },\n    [clickDocumentButton],\n  );\n\n  const rehypeWrapReference = () => {\n    return function wrapTextTransform(tree: any) {\n      visitParents(tree, 'text', (node, ancestors) => {\n        const latestAncestor = ancestors.at(-1);\n        if (\n          latestAncestor.tagName !== 'custom-typography' &&\n          latestAncestor.tagName !== 'code'\n        ) {\n          node.type = 'element';\n          node.tagName = 'custom-typography';\n          node.properties = {};\n          node.children = [{ type: 'text', value: node.value }];\n        }\n      });\n    };\n  };\n\n  const getReferenceInfo = useCallback(\n    (chunkIndex: number) => {\n      const chunks = reference?.chunks ?? [];\n      const chunkItem = chunks[chunkIndex];\n      const document = reference?.doc_aggs?.find(\n        (x) => x?.doc_id === chunkItem?.document_id,\n      );\n      const documentId = document?.doc_id;\n      const documentUrl = document?.url;\n      const fileThumbnail = documentId ? fileThumbnails[documentId] : '';\n      const fileExtension = documentId ? getExtension(document?.doc_name) : '';\n      const imageId = chunkItem?.image_id;\n\n      return {\n        documentUrl,\n        fileThumbnail,\n        fileExtension,\n        imageId,\n        chunkItem,\n        documentId,\n        document,\n      };\n    },\n    [fileThumbnails, reference?.chunks, reference?.doc_aggs],\n  );\n\n  const getPopoverContent = useCallback(\n    (chunkIndex: number) => {\n      const {\n        documentUrl,\n        fileThumbnail,\n        fileExtension,\n        imageId,\n        chunkItem,\n        documentId,\n        document,\n      } = getReferenceInfo(chunkIndex);\n\n      return (\n        <div key={chunkItem?.id} className=\"flex gap-2\">\n          {imageId && (\n            <Popover\n              placement=\"left\"\n              content={\n                <Image\n                  id={imageId}\n                  className={styles.referenceImagePreview}\n                ></Image>\n              }\n            >\n              <Image\n                id={imageId}\n                className={styles.referenceChunkImage}\n              ></Image>\n            </Popover>\n          )}\n          <div className={'space-y-2 max-w-[40vw]'}>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: DOMPurify.sanitize(chunkItem?.content ?? ''),\n              }}\n              className={classNames(styles.chunkContentText)}\n            ></div>\n            {documentId && (\n              <Flex gap={'small'}>\n                {fileThumbnail ? (\n                  <img\n                    src={fileThumbnail}\n                    alt=\"\"\n                    className={styles.fileThumbnail}\n                  />\n                ) : (\n                  <SvgIcon\n                    name={`file-icon/${fileExtension}`}\n                    width={24}\n                  ></SvgIcon>\n                )}\n                <Button\n                  type=\"link\"\n                  className={classNames(styles.documentLink, 'text-wrap')}\n                  onClick={handleDocumentButtonClick(\n                    documentId,\n                    chunkItem,\n                    fileExtension === 'pdf',\n                    documentUrl,\n                  )}\n                >\n                  {document?.doc_name}\n                </Button>\n              </Flex>\n            )}\n          </div>\n        </div>\n      );\n    },\n    [getReferenceInfo, handleDocumentButtonClick],\n  );\n\n  const renderReference = useCallback(\n    (text: string) => {\n      let replacedText = reactStringReplace(text, currentReg, (match, i) => {\n        const chunkIndex = getChunkIndex(match);\n\n        const { documentUrl, fileExtension, imageId, chunkItem, documentId } =\n          getReferenceInfo(chunkIndex);\n\n        const docType = chunkItem?.doc_type;\n\n        return showImage(docType) ? (\n          <Image\n            id={imageId}\n            className={styles.referenceInnerChunkImage}\n            onClick={\n              documentId\n                ? handleDocumentButtonClick(\n                    documentId,\n                    chunkItem,\n                    fileExtension === 'pdf',\n                    documentUrl,\n                  )\n                : () => {}\n            }\n          ></Image>\n        ) : (\n          <Popover content={getPopoverContent(chunkIndex)} key={i}>\n            <InfoCircleOutlined className={styles.referenceIcon} />\n          </Popover>\n        );\n      });\n\n      // replacedText = reactStringReplace(replacedText, curReg, (match, i) => (\n      //   <span className={styles.cursor} key={i}></span>\n      // ));\n\n      return replacedText;\n    },\n    [getPopoverContent, getReferenceInfo, handleDocumentButtonClick],\n  );\n\n  return (\n    <Markdown\n      rehypePlugins={[rehypeWrapReference, rehypeKatex, rehypeRaw]}\n      remarkPlugins={[remarkGfm, remarkMath]}\n      className={styles.markdownContentWrapper}\n      components={\n        {\n          'custom-typography': ({ children }: { children: string }) =>\n            renderReference(children),\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter\n                {...rest}\n                PreTag=\"div\"\n                language={match[1]}\n                wrapLongLines\n              >\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={classNames(className, 'text-wrap')}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {contentWithCursor}\n    </Markdown>\n  );\n};\n\nexport default MarkdownContent;\n","import { MessageType } from '@/constants/chat';\nimport { IConversation, IReference } from '@/interfaces/database/chat';\nimport { isEmpty } from 'lodash';\nimport { EmptyConversationId } from './constants';\nimport { IMessage } from './interface';\n\nexport const isConversationIdExist = (conversationId: string) => {\n  return conversationId !== EmptyConversationId && conversationId !== '';\n};\n\nexport const getDocumentIdsFromConversionReference = (data: IConversation) => {\n  const documentIds = data.reference.reduce(\n    (pre: Array<string>, cur: IReference) => {\n      cur.doc_aggs\n        ?.map((x) => x.doc_id)\n        .forEach((x) => {\n          if (pre.every((y) => y !== x)) {\n            pre.push(x);\n          }\n        });\n      return pre;\n    },\n    [],\n  );\n  return documentIds.join(',');\n};\n\nexport const buildMessageItemReference = (\n  conversation: { message: IMessage[]; reference: IReference[] },\n  message: IMessage,\n) => {\n  const assistantMessages = conversation.message?.filter(\n    (x) => x.role === MessageType.Assistant,\n  );\n  const referenceIndex = assistantMessages.findIndex(\n    (x) => x.id === message.id,\n  );\n  const reference = !isEmpty(message?.reference)\n    ? message?.reference\n    : (conversation?.reference ?? [])[referenceIndex];\n\n  return reference ?? { doc_aggs: [], chunks: [], total: 0 };\n};\n\nconst oldReg = /(#{2}\\d+\\${2})/g;\nexport const currentReg = /\\[ID:(\\d+)\\]/g;\n\n// To be compatible with the old index matching mode\nexport const replaceTextByOldReg = (text: string) => {\n  return (\n    text\n      // ?.replace(currentReg, transformReg)\n      .replace(oldReg, (substring: string) => {\n        return `[ID:${substring.slice(2, -2)}]`;\n      })\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/common-hooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n","import NewDocumentLink from '@/components/new-document-link';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport {\n  useAllTestingResult,\n  useSelectTestingResult,\n} from '@/hooks/knowledge-hooks';\nimport { ITestingDocument } from '@/interfaces/database/knowledge';\nimport { EyeOutlined } from '@ant-design/icons';\nimport { Button, Table, TableProps, Tooltip } from 'antd';\n\ninterface IProps {\n  handleTesting: (ids: string[]) => void;\n  setSelectedDocumentIds: (ids: string[]) => void;\n}\n\nconst SelectFiles = ({ setSelectedDocumentIds, handleTesting }: IProps) => {\n  const { documents } = useSelectTestingResult();\n  const { documents: documentsAll } = useAllTestingResult();\n  const useDocuments =\n    documentsAll?.length > documents?.length ? documentsAll : documents;\n  const { t } = useTranslate('fileManager');\n\n  const columns: TableProps<ITestingDocument>['columns'] = [\n    {\n      title: 'Name',\n      dataIndex: 'doc_name',\n      key: 'doc_name',\n      render: (text) => <p>{text}</p>,\n    },\n\n    {\n      title: 'Hits',\n      dataIndex: 'count',\n      key: 'count',\n      width: 80,\n    },\n    {\n      title: 'View',\n      key: 'view',\n      width: 50,\n      render: (_, { doc_id, doc_name }) => (\n        <NewDocumentLink\n          documentName={doc_name}\n          documentId={doc_id}\n          prefix=\"document\"\n        >\n          <Tooltip title={t('preview')}>\n            <Button type=\"text\">\n              <EyeOutlined size={20} />\n            </Button>\n          </Tooltip>\n        </NewDocumentLink>\n      ),\n    },\n  ];\n\n  const rowSelection = {\n    onChange: (selectedRowKeys: React.Key[]) => {\n      handleTesting(selectedRowKeys as string[]);\n      setSelectedDocumentIds(selectedRowKeys as string[]);\n    },\n    getCheckboxProps: (record: ITestingDocument) => ({\n      disabled: record.doc_name === 'Disabled User', // Column configuration not to be checked\n      name: record.doc_name,\n    }),\n  };\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={useDocuments}\n      showHeader={false}\n      rowSelection={rowSelection}\n      rowKey={'doc_id'}\n    />\n  );\n};\n\nexport default SelectFiles;\n","// extracted by mini-css-extract-plugin\nexport default {\"selectFilesCollapse\":\"selectFilesCollapse___tHbPt\",\"selectFilesTitle\":\"selectFilesTitle___OKrhv\"};","import { ReactComponent as SelectedFilesCollapseIcon } from '@/assets/svg/selected-files-collapse.svg';\nimport { Collapse, Flex, Space } from 'antd';\nimport SelectFiles from './select-files';\n\nimport {\n  useAllTestingResult,\n  useSelectTestingResult,\n} from '@/hooks/knowledge-hooks';\nimport { useTranslation } from 'react-i18next';\nimport styles from './index.less';\n\ninterface IProps {\n  onTesting(documentIds: string[]): void;\n  setSelectedDocumentIds(documentIds: string[]): void;\n  selectedDocumentIds: string[];\n}\n\nconst RetrievalDocuments = ({\n  onTesting,\n  selectedDocumentIds,\n  setSelectedDocumentIds,\n}: IProps) => {\n  const { t } = useTranslation();\n  const { documents: documentsAll } = useAllTestingResult();\n  const { documents } = useSelectTestingResult();\n  const { documents: useDocuments } = {\n    documents:\n      documentsAll?.length > documents?.length ? documentsAll : documents,\n  };\n\n  return (\n    <Collapse\n      expandIcon={() => <SelectedFilesCollapseIcon></SelectedFilesCollapseIcon>}\n      className={styles.selectFilesCollapse}\n      items={[\n        {\n          key: '1',\n          label: (\n            <Flex\n              justify={'space-between'}\n              align=\"center\"\n              className={styles.selectFilesTitle}\n            >\n              <Space>\n                <span>\n                  {selectedDocumentIds?.length ?? 0}/{useDocuments?.length ?? 0}\n                </span>\n                {t('knowledgeDetails.filesSelected')}\n              </Space>\n            </Flex>\n          ),\n          children: (\n            <div>\n              <SelectFiles\n                setSelectedDocumentIds={setSelectedDocumentIds}\n                handleTesting={onTesting}\n              ></SelectFiles>\n            </div>\n          ),\n        },\n      ]}\n    />\n  );\n};\n\nexport default RetrievalDocuments;\n","// extracted by mini-css-extract-plugin\nexport default {\"searchPage\":\"searchPage___TO5ok\",\"card\":\"card___scTJ7\",\"tag\":\"tag___F3dia\",\"searchSide\":\"searchSide___Ur4mG\",\"modelForm\":\"modelForm___v4GJN\",\"checkGroup\":\"checkGroup___YVVws\",\"list\":\"list___FBGDW\",\"checkbox\":\"checkbox___CWAZR\",\"knowledgeName\":\"knowledgeName___pQK8r\",\"embeddingId\":\"embeddingId___yxVE4\",\"firstRenderContent\":\"firstRenderContent___kYeDC\",\"content\":\"content___FJSce\",\"hide\":\"hide___d1U6O\",\"main\":\"main___G4gQT\",\"highlightContent\":\"highlightContent___GkhyP\",\"documentReference\":\"documentReference___Bj5k4\",\"pagination\":\"pagination___EGLXC\",\"answerWrapper\":\"answerWrapper___EIJcg\",\"globalInput\":\"globalInput___jG4B8\",\"partialInput\":\"partialInput___kQwzQ\",\"searchInput\":\"searchInput___ryNkF\",\"appIcon\":\"appIcon____OfF0\",\"appName\":\"appName___JGWuY\",\"textclip\":\"textclip___AoVgw\",\"popupMarkdown\":\"popupMarkdown___Zggfc\",\"mindMapFloatButton\":\"mindMapFloatButton___GL1ZJ\"};","import IndentedTree from '@/components/indented-tree/indented-tree';\nimport { IModalProps } from '@/interfaces/common';\nimport { Drawer, Flex, Progress } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { usePendingMindMap } from './hooks';\n\ninterface IProps extends IModalProps<any> {\n  data: any;\n}\n\nconst MindMapDrawer = ({ data, hideModal, visible, loading }: IProps) => {\n  const { t } = useTranslation();\n  const percent = usePendingMindMap();\n  return (\n    <Drawer\n      title={t('chunk.mind')}\n      onClose={hideModal}\n      open={visible}\n      width={'40vw'}\n    >\n      {loading ? (\n        <Flex justify=\"center\">\n          <Progress type=\"circle\" percent={percent} size={200} />\n        </Flex>\n      ) : (\n        <IndentedTree\n          data={data}\n          show\n          style={{ width: '100%', height: '100%' }}\n        ></IndentedTree>\n      )}\n    </Drawer>\n  );\n};\n\nexport default MindMapDrawer;\n","import { useFetchMindMap, useFetchRelatedQuestions } from '@/hooks/chat-hooks';\nimport { useSetModalState } from '@/hooks/common-hooks';\nimport {\n  useTestChunkAllRetrieval,\n  useTestChunkRetrieval,\n} from '@/hooks/knowledge-hooks';\nimport {\n  useGetPaginationWithRouter,\n  useSendMessageWithSse,\n} from '@/hooks/logic-hooks';\nimport { IAnswer } from '@/interfaces/database/chat';\nimport api from '@/utils/api';\nimport { get, isEmpty, isEqual, trim } from 'lodash';\nimport {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nexport const useSendQuestion = (kbIds: string[]) => {\n  const { send, answer, done, stopOutputMessage } = useSendMessageWithSse(\n    api.ask,\n  );\n  const { testChunk, loading } = useTestChunkRetrieval();\n  const { testChunkAll, loading: loadingAll } = useTestChunkAllRetrieval();\n  const [sendingLoading, setSendingLoading] = useState(false);\n  const [currentAnswer, setCurrentAnswer] = useState({} as IAnswer);\n  const { fetchRelatedQuestions, data: relatedQuestions } =\n    useFetchRelatedQuestions();\n  const [searchStr, setSearchStr] = useState<string>('');\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  const [selectedDocumentIds, setSelectedDocumentIds] = useState<string[]>([]);\n\n  const { pagination, setPagination } = useGetPaginationWithRouter();\n\n  const sendQuestion = useCallback(\n    (question: string) => {\n      const q = trim(question);\n      if (isEmpty(q)) return;\n      setPagination({ page: 1 });\n      setIsFirstRender(false);\n      setCurrentAnswer({} as IAnswer);\n      setSendingLoading(true);\n      send({ kb_ids: kbIds, question: q });\n      testChunk({\n        kb_id: kbIds,\n        highlight: true,\n        question: q,\n        page: 1,\n        size: pagination.pageSize,\n      });\n\n      fetchRelatedQuestions(q);\n    },\n    [\n      send,\n      testChunk,\n      kbIds,\n      fetchRelatedQuestions,\n      setPagination,\n      pagination.pageSize,\n    ],\n  );\n\n  const handleSearchStrChange: ChangeEventHandler<HTMLInputElement> =\n    useCallback((e) => {\n      setSearchStr(e.target.value);\n    }, []);\n\n  const handleClickRelatedQuestion = useCallback(\n    (question: string) => () => {\n      if (sendingLoading) return;\n\n      setSearchStr(question);\n      sendQuestion(question);\n    },\n    [sendQuestion, sendingLoading],\n  );\n\n  const handleTestChunk = useCallback(\n    (documentIds: string[], page: number = 1, size: number = 10) => {\n      const q = trim(searchStr);\n      if (sendingLoading || isEmpty(q)) return;\n\n      testChunk({\n        kb_id: kbIds,\n        highlight: true,\n        question: q,\n        doc_ids: documentIds ?? selectedDocumentIds,\n        page,\n        size,\n      });\n\n      testChunkAll({\n        kb_id: kbIds,\n        highlight: true,\n        question: q,\n        doc_ids: [],\n        page,\n        size,\n      });\n    },\n    [sendingLoading, searchStr, kbIds, testChunk, selectedDocumentIds],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(answer)) {\n      setCurrentAnswer(answer);\n    }\n  }, [answer]);\n\n  useEffect(() => {\n    if (done) {\n      setSendingLoading(false);\n    }\n  }, [done]);\n\n  return {\n    sendQuestion,\n    handleSearchStrChange,\n    handleClickRelatedQuestion,\n    handleTestChunk,\n    setSelectedDocumentIds,\n    loading,\n    sendingLoading,\n    answer: currentAnswer,\n    relatedQuestions: relatedQuestions?.slice(0, 5) ?? [],\n    searchStr,\n    isFirstRender,\n    selectedDocumentIds,\n    isSearchStrEmpty: isEmpty(trim(searchStr)),\n    stopOutputMessage,\n  };\n};\n\nexport const useFetchBackgroundImage = () => {\n  const [imgUrl, setImgUrl] = useState<string>('');\n\n  const fetchImage = useCallback(async () => {\n    try {\n      const res = await fetch(\n        '/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=zh-CN',\n      );\n      const ret = await res.json();\n      const url = get(ret, 'images.0.url');\n      if (url) {\n        setImgUrl(url);\n      }\n    } catch (error) {\n      console.log(' ~ fetchImage ~ error:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchImage();\n  }, [fetchImage]);\n\n  return `https://cn.bing.com${imgUrl}`;\n};\n\nexport const useTestRetrieval = (\n  kbIds: string[],\n  searchStr: string,\n  sendingLoading: boolean,\n) => {\n  const { testChunk, loading } = useTestChunkRetrieval();\n  const { pagination } = useGetPaginationWithRouter();\n\n  const [selectedDocumentIds, setSelectedDocumentIds] = useState<string[]>([]);\n\n  const handleTestChunk = useCallback(() => {\n    const q = trim(searchStr);\n    if (sendingLoading || isEmpty(q)) return;\n\n    testChunk({\n      kb_id: kbIds,\n      highlight: true,\n      question: q,\n      doc_ids: Array.isArray(selectedDocumentIds) ? selectedDocumentIds : [],\n      page: pagination.current,\n      size: pagination.pageSize,\n    });\n  }, [\n    sendingLoading,\n    searchStr,\n    kbIds,\n    testChunk,\n    selectedDocumentIds,\n    pagination,\n  ]);\n\n  useEffect(() => {\n    handleTestChunk();\n  }, [handleTestChunk]);\n\n  return {\n    loading,\n    selectedDocumentIds,\n    setSelectedDocumentIds,\n  };\n};\n\nexport const useShowMindMapDrawer = (kbIds: string[], question: string) => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const ref = useRef<any>();\n\n  const {\n    fetchMindMap,\n    data: mindMap,\n    loading: mindMapLoading,\n  } = useFetchMindMap();\n\n  const handleShowModal = useCallback(() => {\n    const searchParams = { question: trim(question), kb_ids: kbIds };\n    if (\n      !isEmpty(searchParams.question) &&\n      !isEqual(searchParams, ref.current)\n    ) {\n      ref.current = searchParams;\n      fetchMindMap(searchParams);\n    }\n    showModal();\n  }, [fetchMindMap, showModal, question, kbIds]);\n\n  return {\n    mindMap,\n    mindMapVisible: visible,\n    mindMapLoading,\n    showMindMapModal: handleShowModal,\n    hideMindMapModal: hideModal,\n  };\n};\n\nexport const usePendingMindMap = () => {\n  const [count, setCount] = useState<number>(0);\n  const ref = useRef<NodeJS.Timeout>();\n\n  const setCountInterval = useCallback(() => {\n    ref.current = setInterval(() => {\n      setCount((pre) => {\n        if (pre > 40) {\n          clearInterval(ref?.current);\n        }\n        return pre + 1;\n      });\n    }, 1000);\n  }, []);\n\n  useEffect(() => {\n    setCountInterval();\n    return () => {\n      clearInterval(ref?.current);\n    };\n  }, [setCountInterval]);\n\n  return Number(((count / 43) * 100).toFixed(0));\n};\n","import { useFetchKnowledgeList } from '@/hooks/knowledge-hooks';\nimport { UserOutlined } from '@ant-design/icons';\nimport type { TreeDataNode, TreeProps } from 'antd';\nimport { Avatar, Layout, Space, Spin, Tree, Typography } from 'antd';\nimport classNames from 'classnames';\nimport {\n  Dispatch,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport styles from './index.less';\n\nconst { Sider } = Layout;\n\ninterface IProps {\n  isFirstRender: boolean;\n  checkedList: string[];\n  setCheckedList: Dispatch<SetStateAction<string[]>>;\n}\n\nconst SearchSidebar = ({\n  isFirstRender,\n  checkedList,\n  setCheckedList,\n}: IProps) => {\n  const { list, loading } = useFetchKnowledgeList();\n\n  const groupedList = useMemo(() => {\n    return list.reduce((pre: TreeDataNode[], cur) => {\n      const parentItem = pre.find((x) => x.key === cur.embd_id);\n      const childItem: TreeDataNode = {\n        title: cur.name,\n        key: cur.id,\n        isLeaf: true,\n      };\n      if (parentItem) {\n        parentItem.children?.push(childItem);\n      } else {\n        pre.push({\n          title: cur.embd_id,\n          key: cur.embd_id,\n          isLeaf: false,\n          children: [childItem],\n        });\n      }\n\n      return pre;\n    }, []);\n  }, [list]);\n\n  const [expandedKeys, setExpandedKeys] = useState<React.Key[]>([]);\n  const [selectedKeys, setSelectedKeys] = useState<React.Key[]>([]);\n  const [autoExpandParent, setAutoExpandParent] = useState<boolean>(true);\n\n  const onExpand: TreeProps['onExpand'] = (expandedKeysValue) => {\n    // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n    // or, you can remove all expanded children keys.\n    setExpandedKeys(expandedKeysValue);\n    setAutoExpandParent(false);\n  };\n\n  const onCheck: TreeProps['onCheck'] = (checkedKeysValue, info) => {\n    console.log('onCheck', checkedKeysValue, info);\n    const currentCheckedKeysValue = checkedKeysValue as string[];\n\n    let nextSelectedKeysValue: string[] = [];\n    const { isLeaf, checked, key, children } = info.node;\n    if (isLeaf) {\n      const item = list.find((x) => x.id === key);\n      if (!checked) {\n        const embeddingIds = currentCheckedKeysValue\n          .filter((x) => list.some((y) => y.id === x))\n          .map((x) => list.find((y) => y.id === x)?.embd_id);\n\n        if (embeddingIds.some((x) => x !== item?.embd_id)) {\n          nextSelectedKeysValue = [key as string];\n        } else {\n          nextSelectedKeysValue = currentCheckedKeysValue;\n        }\n      } else {\n        nextSelectedKeysValue = currentCheckedKeysValue;\n      }\n    } else {\n      if (!checked) {\n        nextSelectedKeysValue = [\n          key as string,\n          ...(children?.map((x) => x.key as string) ?? []),\n        ];\n      } else {\n        nextSelectedKeysValue = [];\n      }\n    }\n\n    setCheckedList(nextSelectedKeysValue);\n  };\n\n  const onSelect: TreeProps['onSelect'] = (selectedKeysValue, info) => {\n    console.log('onSelect', info);\n\n    setSelectedKeys(selectedKeysValue);\n  };\n\n  const renderTitle = useCallback(\n    (node: TreeDataNode) => {\n      const item = list.find((x) => x.id === node.key);\n      return (\n        <Space>\n          {node.isLeaf && (\n            <Avatar size={24} icon={<UserOutlined />} src={item?.avatar} />\n          )}\n          <Typography.Text\n            ellipsis={{ tooltip: node.title as string }}\n            className={node.isLeaf ? styles.knowledgeName : styles.embeddingId}\n          >\n            {node.title as string}\n          </Typography.Text>\n        </Space>\n      );\n    },\n    [list],\n  );\n\n  useEffect(() => {\n    const firstGroup = groupedList[0]?.children?.map((x) => x.key as string);\n    if (firstGroup) {\n      setCheckedList(firstGroup);\n    }\n    setExpandedKeys(groupedList.map((x) => x.key));\n  }, [groupedList, setExpandedKeys, setCheckedList]);\n\n  return (\n    <Sider\n      className={classNames(styles.searchSide, {\n        [styles.transparentSearchSide]: isFirstRender,\n      })}\n      theme={'light'}\n      width={'20%'}\n    >\n      <Spin spinning={loading}>\n        <Tree\n          className={styles.list}\n          checkable\n          onExpand={onExpand}\n          expandedKeys={expandedKeys}\n          autoExpandParent={autoExpandParent}\n          onCheck={onCheck}\n          checkedKeys={checkedList}\n          onSelect={onSelect}\n          selectedKeys={selectedKeys}\n          treeData={groupedList}\n          titleRender={renderTitle}\n        />\n      </Spin>\n    </Sider>\n  );\n};\n\nexport default SearchSidebar;\n","import FileIcon from '@/components/file-icon';\nimport HightLightMarkdown from '@/components/highlight-markdown';\nimport { ImageWithPopover } from '@/components/image';\nimport PdfDrawer from '@/components/pdf-drawer';\nimport { useClickDrawer } from '@/components/pdf-drawer/hooks';\nimport RetrievalDocuments from '@/components/retrieval-documents';\nimport SvgIcon from '@/components/svg-icon';\nimport {\n  useFetchKnowledgeList,\n  useSelectTestingResult,\n} from '@/hooks/knowledge-hooks';\nimport { useGetPaginationWithRouter } from '@/hooks/logic-hooks';\nimport { IReference } from '@/interfaces/database/chat';\nimport {\n  Button,\n  Card,\n  Divider,\n  Flex,\n  FloatButton,\n  Input,\n  Layout,\n  List,\n  Pagination,\n  PaginationProps,\n  Popover,\n  Skeleton,\n  Space,\n  Spin,\n  Tag,\n  Tooltip,\n} from 'antd';\nimport classNames from 'classnames';\nimport DOMPurify from 'dompurify';\nimport { isEmpty } from 'lodash';\nimport { CircleStop, SendHorizontal } from 'lucide-react';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport MarkdownContent from '../chat/markdown-content';\nimport { useSendQuestion, useShowMindMapDrawer } from './hooks';\nimport styles from './index.less';\nimport MindMapDrawer from './mindmap-drawer';\nimport SearchSidebar from './sidebar';\n\nconst { Content } = Layout;\nconst { Search } = Input;\n\nconst SearchPage = () => {\n  const { t } = useTranslation();\n  const [checkedList, setCheckedList] = useState<string[]>([]);\n  const { chunks, total } = useSelectTestingResult();\n  const { list: knowledgeList } = useFetchKnowledgeList();\n  const checkedWithoutEmbeddingIdList = useMemo(() => {\n    return checkedList.filter((x) => knowledgeList.some((y) => y.id === x));\n  }, [checkedList, knowledgeList]);\n\n  const {\n    sendQuestion,\n    handleClickRelatedQuestion,\n    handleSearchStrChange,\n    handleTestChunk,\n    setSelectedDocumentIds,\n    answer,\n    sendingLoading,\n    relatedQuestions,\n    searchStr,\n    loading,\n    isFirstRender,\n    selectedDocumentIds,\n    isSearchStrEmpty,\n    stopOutputMessage,\n  } = useSendQuestion(checkedWithoutEmbeddingIdList);\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n  const { pagination } = useGetPaginationWithRouter();\n  const {\n    mindMapVisible,\n    hideMindMapModal,\n    showMindMapModal,\n    mindMapLoading,\n    mindMap,\n  } = useShowMindMapDrawer(checkedWithoutEmbeddingIdList, searchStr);\n\n  const onChange: PaginationProps['onChange'] = (pageNumber, pageSize) => {\n    pagination.onChange?.(pageNumber, pageSize);\n    handleTestChunk(selectedDocumentIds, pageNumber, pageSize);\n  };\n\n  const handleSearch = useCallback(() => {\n    sendQuestion(searchStr);\n  }, [searchStr, sendQuestion]);\n\n  const InputSearch = (\n    <Search\n      value={searchStr}\n      onChange={handleSearchStrChange}\n      placeholder={t('header.search')}\n      allowClear\n      addonAfter={\n        sendingLoading ? (\n          <Button onClick={stopOutputMessage}>\n            <CircleStop />\n          </Button>\n        ) : (\n          <Button onClick={handleSearch}>\n            <SendHorizontal className=\"size-5 text-blue-500\" />\n          </Button>\n        )\n      }\n      onSearch={sendQuestion}\n      size=\"large\"\n      loading={sendingLoading}\n      disabled={checkedWithoutEmbeddingIdList.length === 0}\n      className={classNames(\n        styles.searchInput,\n        isFirstRender ? styles.globalInput : styles.partialInput,\n      )}\n    />\n  );\n\n  return (\n    <>\n      <Layout className={styles.searchPage}>\n        <SearchSidebar\n          isFirstRender={isFirstRender}\n          checkedList={checkedWithoutEmbeddingIdList}\n          setCheckedList={setCheckedList}\n        ></SearchSidebar>\n        <Layout className={isFirstRender ? styles.mainLayout : ''}>\n          <Content>\n            {isFirstRender ? (\n              <Flex justify=\"center\" className={styles.firstRenderContent}>\n                <Flex vertical align=\"center\" gap={'large'}>\n                  {InputSearch}\n                </Flex>\n              </Flex>\n            ) : (\n              <Flex className={styles.content}>\n                <section className={styles.main}>\n                  {InputSearch}\n                  <Card\n                    title={\n                      <Flex gap={10}>\n                        <img src=\"/logo.svg\" alt=\"\" width={20} />\n                        {t('chat.answerTitle')}\n                      </Flex>\n                    }\n                    className={styles.answerWrapper}\n                  >\n                    {isEmpty(answer) && sendingLoading ? (\n                      <Skeleton active />\n                    ) : (\n                      answer.answer && (\n                        <MarkdownContent\n                          loading={sendingLoading}\n                          content={answer.answer}\n                          reference={answer.reference ?? ({} as IReference)}\n                          clickDocumentButton={clickDocumentButton}\n                        ></MarkdownContent>\n                      )\n                    )}\n                  </Card>\n                  <Divider></Divider>\n                  <RetrievalDocuments\n                    selectedDocumentIds={selectedDocumentIds}\n                    setSelectedDocumentIds={setSelectedDocumentIds}\n                    onTesting={handleTestChunk}\n                  ></RetrievalDocuments>\n                  <Divider></Divider>\n                  <Spin spinning={loading}>\n                    {chunks?.length > 0 && (\n                      <List\n                        dataSource={chunks || []}\n                        className={styles.chunks}\n                        renderItem={(item) => (\n                          <List.Item>\n                            <Card className={styles.card}>\n                              <Space>\n                                <ImageWithPopover\n                                  id={item.img_id}\n                                ></ImageWithPopover>\n                                <Flex vertical gap={10}>\n                                  <Popover\n                                    content={\n                                      <div className={styles.popupMarkdown}>\n                                        <HightLightMarkdown>\n                                          {item.content_with_weight}\n                                        </HightLightMarkdown>\n                                      </div>\n                                    }\n                                  >\n                                    <div\n                                      dangerouslySetInnerHTML={{\n                                        __html: DOMPurify.sanitize(\n                                          `${item.highlight}...`,\n                                        ),\n                                      }}\n                                      className={styles.highlightContent}\n                                    ></div>\n                                  </Popover>\n                                  <Space\n                                    className={styles.documentReference}\n                                    onClick={() =>\n                                      clickDocumentButton(\n                                        item.doc_id,\n                                        item as any,\n                                      )\n                                    }\n                                  >\n                                    <FileIcon\n                                      id={item.image_id}\n                                      name={item.docnm_kwd}\n                                    ></FileIcon>\n                                    {item.docnm_kwd}\n                                  </Space>\n                                </Flex>\n                              </Space>\n                            </Card>\n                          </List.Item>\n                        )}\n                      />\n                    )}\n                  </Spin>\n                  {relatedQuestions?.length > 0 && (\n                    <Card title={t('chat.relatedQuestion')}>\n                      <Flex wrap=\"wrap\" gap={'10px 0'}>\n                        {relatedQuestions?.map((x, idx) => (\n                          <Tag\n                            key={idx}\n                            className={styles.tag}\n                            onClick={handleClickRelatedQuestion(x)}\n                          >\n                            {x}\n                          </Tag>\n                        ))}\n                      </Flex>\n                    </Card>\n                  )}\n                  <Divider></Divider>\n                  <Pagination\n                    {...pagination}\n                    total={total}\n                    onChange={onChange}\n                    className={styles.pagination}\n                  />\n                </section>\n              </Flex>\n            )}\n          </Content>\n        </Layout>\n      </Layout>\n      {!isFirstRender &&\n        !isSearchStrEmpty &&\n        !isEmpty(checkedWithoutEmbeddingIdList) && (\n          <Tooltip title={t('chunk.mind')} zIndex={1}>\n            <FloatButton\n              className={styles.mindMapFloatButton}\n              onClick={showMindMapModal}\n              icon={\n                <SvgIcon name=\"paper-clip\" width={24} height={30}></SvgIcon>\n              }\n            />\n          </Tooltip>\n        )}\n      {visible && (\n        <PdfDrawer\n          visible={visible}\n          hideModal={hideModal}\n          documentId={documentId}\n          chunk={selectedChunk}\n        ></PdfDrawer>\n      )}\n      {mindMapVisible && (\n        <MindMapDrawer\n          visible={mindMapVisible}\n          hideModal={hideMindMapModal}\n          data={mindMap}\n          loading={mindMapLoading}\n        ></MindMapDrawer>\n      )}\n    </>\n  );\n};\n\nexport default SearchPage;\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgSelectedFilesCollapse = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 20, height: 20, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"M6.667 10h6.666M6.5 17.5h7c1.4 0 2.1 0 2.635-.273a2.5 2.5 0 0 0 1.092-1.092c.273-.535.273-1.235.273-2.635v-7c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093C15.6 2.5 14.9 2.5 13.5 2.5h-7c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093C2.5 4.4 2.5 5.1 2.5 6.5v7c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092C4.4 17.5 5.1 17.5 6.5 17.5Z\", stroke: \"#7F56D9\", strokeWidth: 2, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgSelectedFilesCollapse as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNjY3IDEwaDYuNjY2TTYuNSAxNy41aDdjMS40IDAgMi4xIDAgMi42MzUtLjI3M2EyLjUgMi41IDAgMCAwIDEuMDkyLTEuMDkyYy4yNzMtLjUzNS4yNzMtMS4yMzUuMjczLTIuNjM1di03YzAtMS40IDAtMi4xLS4yNzMtMi42MzVhMi41IDIuNSAwIDAgMC0xLjA5Mi0xLjA5M0MxNS42IDIuNSAxNC45IDIuNSAxMy41IDIuNWgtN2MtMS40IDAtMi4xIDAtMi42MzUuMjcyYTIuNSAyLjUgMCAwIDAtMS4wOTMgMS4wOTNDMi41IDQuNCAyLjUgNS4xIDIuNSA2LjV2N2MwIDEuNCAwIDIuMS4yNzIgMi42MzVhMi41IDIuNSAwIDAgMCAxLjA5MyAxLjA5MkM0LjQgMTcuNSA1LjEgMTcuNSA2LjUgMTcuNVoiIHN0cm9rZT0iIzdGNTZEOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=\";\n"],"names":["_ref","name","id","fileExtension","getExtension","_useFetchDocumentThum","useFetchDocumentThumbnailsByIds","fileThumbnails","data","setDocumentIds","fileThumbnail","useEffect","_jsx","src","className","styles","SvgIcon","concat","width","children","Markdown","remarkPlugins","remarkGfm","remarkMath","rehypePlugins","rehypeRaw","rehypeKatex","classNames","components","code","props","rest","node","_objectWithoutProperties","_excluded","match","exec","SyntaxHighlighter","_objectSpread","PreTag","language","String","replace","preprocessLaTeX","Image","api_host","alt","ImageWithPopover","_ref2","Popover","placement","content","rootId","COLORS","TreeEvent","IndentedNode","_BaseNode","_inherits","_super","_createSuper","options","_classCallCheck","Object","assign","style","defaultStyleProps","call","_createClass","key","get","_this$attributes$cont","this","attributes","context","model","getChildrenData","value","_this$getSize","getSize","_this$getSize2","_slicedToArray","height","keyStyle","_get","_getPrototypeOf","prototype","fill","container","getKeyStyle","upsert","Rect","label","labelText","subStyleProps","getGraphicStyle","_this$getSize3","iconAreaStyle","x","y","zIndex","target","type","listener","Reflect","has","set","addEventListener","collapsed","color","_this$childrenData","_this$getSize5","backgroundFill","cursor","fontSize","padding","text","childrenData","length","textAlign","_this","countStyle","getCountStyle","btn","Badge","forwardEvent","CommonEvent","CLICK","event","stopPropagation","graph","emit","_this$childrenData2","Array","isArray","showIcon","isShowCollapse","_this$getSize7","visibility","backgroundHeight","backgroundWidth","fontFamily","_this2","iconStyle","getCollapseStyle","_this$getSize9","backgroundLineWidth","backgroundStroke","arguments","undefined","parsedAttributes","drawCountShape","drawIconArea","drawCollapseShape","BaseNode","_defineProperty","ports","IndentedEdge","_Polyline","_super2","apply","sourcePoint","targetPoint","Polyline","CollapseExpandTree","_BaseBehavior","_super3","_this3","_assertThisInitialized","setIcon","show","status","_this3$context","element","updateNodeData","draw","animation","silence","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","collapseElement","expandElement","stop","_x","bindEvents","unbindEvents","on","NodeEvent","POINTER_ENTER","POINTER_LEAVE","hideIcon","onCollapseExpand","off","BaseBehavior","fallbackRender","error","_jsxs","role","message","register","ExtensionCategory","NODE","EDGE","BEHAVIOR","_ref3","_ref3$style","containerRef","useRef","graphRef","assignIds","React","parentId","index","forEach","child","idx","render","useCallback","_ref4","_callee2","_context2","Graph","current","size","d","labelBackground","datum","labelBackgroundRadius","labelBackgroundFill","labelFill","_d$style","labelTextAlign","labelTextBaseline","depth","getAncestorsData","state","selected","lineWidth","labelFontWeight","edge","radius","sourcePort","targetPort","stroke","source","layout","direction","isHorizontal","indent","getHeight","getVGap","behaviors","enable","targetType","destroy","setData","treeToGraphData","_x2","isEmpty","ErrorBoundary","ref","display","link","_ref$preventDefault","preventDefault","_ref$color","documentId","documentName","_ref$prefix","prefix","nextLink","extension","onClick","isSupportedPreviewDocumentType","e","href","rel","wordBreak","useClickDrawer","_useSetModalState","useSetModalState","visible","showModal","hideModal","_useState","useState","_useState2","selectedChunk","setSelectedChunk","_useState3","_useState4","setDocumentId","clickDocumentButton","chunk","HighlightPopup","comment","emoji","getDocumentUrl","useGetDocumentUrl","_useGetChunkHighlight","useGetChunkHighlights","highlights","setWidthAndHeight","loaded","setLoaded","url","useCatchDocumentError","resetHash","PdfLoader","beforeLoad","Skeleton","active","workerSrc","errorMessage","FileError","pdfDocument","getPage","then","page","viewport","getViewport","scale","PdfHighlighter","enableAreaSelection","altKey","onScrollChange","scrollRef","scrollTo","onSelectionFinished","highlightTransform","highlight","setTip","hideTip","viewportToScaled","screenshot","isScrolledTo","component","Boolean","image","Highlight","position","AreaHighlight","onChange","Popup","popupContent","onMouseOver","onMouseOut","_ref$visible","Drawer","title","onClose","open","DocumentPreviewer","setError","fetchDocument","_yield$axios$get","axios","sent","reference","t","useTranslation","contentWithCursor","useMemo","nextText","replaceTextByOldReg","pipe","replaceThinkToSection","docAggs","doc_aggs","map","doc_id","handleDocumentButtonClick","isPdf","documentUrl","window","getReferenceInfo","chunkIndex","_reference$chunks","_reference$doc_aggs","chunkItem","chunks","document","find","document_id","doc_name","imageId","image_id","getPopoverContent","_chunkItem$content","_getReferenceInfo","dangerouslySetInnerHTML","__html","DOMPurify","Flex","gap","Button","renderReference","reactStringReplace","currentReg","i","Number","slice","getChunkIndex","_getReferenceInfo2","docType","doc_type","showImage","InfoCircleOutlined","tree","visitParents","ancestors","latestAncestor","at","tagName","properties","wrapLongLines","buildMessageItemReference","conversation","_conversation$message","_conversation$referen","referenceIndex","filter","MessageType","Assistant","findIndex","total","oldReg","substring","useTranslate","align","justify","Alert","setSelectedDocumentIds","handleTesting","documents","useSelectTestingResult","documentsAll","useAllTestingResult","useDocuments","columns","dataIndex","_","NewDocumentLink","Tooltip","EyeOutlined","rowSelection","selectedRowKeys","getCheckboxProps","record","disabled","Table","dataSource","showHeader","rowKey","_selectedDocumentIds$","_useDocuments$length","onTesting","selectedDocumentIds","Collapse","expandIcon","SelectedFilesCollapseIcon","items","Space","SelectFiles","_useState15","_useState16","count","setCount","setCountInterval","loading","percent","setInterval","pre","clearInterval","toFixed","Progress","IndentedTree","Sider","Layout","isFirstRender","checkedList","setCheckedList","_useFetchKnowledgeLis","useFetchKnowledgeList","list","groupedList","reduce","cur","_parentItem$children","parentItem","embd_id","childItem","isLeaf","push","expandedKeys","setExpandedKeys","selectedKeys","setSelectedKeys","_useState5","_useState6","autoExpandParent","setAutoExpandParent","renderTitle","item","Avatar","icon","UserOutlined","avatar","Typography","Text","ellipsis","tooltip","knowledgeName","embeddingId","_groupedList$","firstGroup","searchSide","transparentSearchSide","theme","Spin","spinning","Tree","checkable","onExpand","expandedKeysValue","onCheck","checkedKeysValue","info","console","log","currentCheckedKeysValue","nextSelectedKeysValue","_info$node","checked","some","_list$find","_children$map","_toConsumableArray","checkedKeys","onSelect","selectedKeysValue","treeData","titleRender","Content","Search","Input","_answer$reference","_useSelectTestingResu","knowledgeList","checkedWithoutEmbeddingIdList","_useSendQuestion","kbIds","_relatedQuestions$sli","_useSendMessageWithSs","useSendMessageWithSse","api","ask","send","answer","done","stopOutputMessage","_useTestChunkRetrieva","useTestChunkRetrieval","testChunk","_useTestChunkAllRetri","useTestChunkAllRetrieval","testChunkAll","sendingLoading","setSendingLoading","currentAnswer","setCurrentAnswer","_useFetchRelatedQuest","useFetchRelatedQuestions","fetchRelatedQuestions","relatedQuestions","searchStr","setSearchStr","_useState7","_useState8","setIsFirstRender","_useState9","_useState10","_useGetPaginationWith","useGetPaginationWithRouter","pagination","setPagination","sendQuestion","question","q","trim","kb_ids","kb_id","pageSize","handleSearchStrChange","handleClickRelatedQuestion","handleTestChunk","documentIds","doc_ids","isSearchStrEmpty","useSendQuestion","_useClickDrawer","_useShowMindMapDrawer","_useFetchMindMap","useFetchMindMap","fetchMindMap","mindMap","mindMapVisible","mindMapLoading","showMindMapModal","searchParams","isEqual","hideMindMapModal","useShowMindMapDrawer","handleSearch","InputSearch","placeholder","allowClear","addonAfter","CircleStop","SendHorizontal","onSearch","searchInput","globalInput","partialInput","_Fragment","searchPage","SearchSidebar","mainLayout","firstRenderContent","vertical","main","Card","answerWrapper","MarkdownContent","Divider","RetrievalDocuments","List","renderItem","Item","card","img_id","popupMarkdown","HightLightMarkdown","content_with_weight","highlightContent","documentReference","FileIcon","docnm_kwd","Tag","tag","Pagination","pageNumber","_pagination$onChange","FloatButton","mindMapFloatButton","PdfDrawer","MindMapDrawer","__defProp","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","SvgSelectedFilesCollapse","a","b","prop","__spreadValues","xmlns","strokeWidth","strokeLinecap","strokeLinejoin"],"sourceRoot":""}