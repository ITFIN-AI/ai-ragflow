{"version":3,"file":"p__agents__agent-templates.2f998a0c.async.js","mappings":"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","sources":["webpack:///./src/components/page-header.tsx","webpack:///./src/components/ui/form.tsx","webpack:///./src/components/ui/label.tsx","webpack:///./src/constants/agent.ts","webpack:///./src/hooks/use-agent-request.ts","webpack:///./src/pages/add-knowledge/constant.ts","webpack:///./src/pages/agents/create-agent-form.tsx","webpack:///./src/pages/agents/create-agent-dialog.tsx","webpack:///./src/pages/agents/template-card.tsx","webpack:///./src/pages/agents/agent-templates.tsx","webpack:///./src/services/flow-service.ts"],"sourcesContent":["import { ArrowLeft } from 'lucide-react';\nimport { PropsWithChildren, ReactNode } from 'react';\nimport { Button } from './ui/button';\n\ninterface IPageHeaderProps extends PropsWithChildren {\n  back(): void;\n  title: ReactNode;\n}\n\nexport function PageHeader({ back, title, children }: IPageHeaderProps) {\n  return (\n    <header className=\"flex justify-between items-center border-b pr-9\">\n      <div className=\"flex items-center \">\n        <div className=\"flex items-center border-r p-1.5\">\n          <Button variant=\"ghost\" size=\"icon\" onClick={back}>\n            <ArrowLeft className=\"w-5 h-5\" />\n          </Button>\n        </div>\n        <div className=\"p-4\">\n          <h1 className=\"text-2xl font-semibold tracking-tight\">{title}</h1>\n        </div>\n      </div>\n      {children}\n    </header>\n  );\n}\n","'use client';\n\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { Slot } from '@radix-ui/react-slot';\nimport * as React from 'react';\nimport {\n  Controller,\n  ControllerProps,\n  FieldPath,\n  FieldValues,\n  FormProvider,\n  useFormContext,\n} from 'react-hook-form';\n\nimport { Label } from '@/components/ui/label';\nimport { cn } from '@/lib/utils';\nimport { FormTooltip } from './tooltip';\n\nconst Form = FormProvider;\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue,\n);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error('useFormField should be used within <FormField>');\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\nconst InnerFormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn('space-y-2', className)} {...props} />\n    </FormItemContext.Provider>\n  );\n});\n\nInnerFormItem.displayName = 'FormItem';\n\nconst FormItem = React.memo(InnerFormItem);\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & {\n    tooltip?: React.ReactNode;\n  }\n>(({ className, tooltip, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && 'text-destructive', className, 'flex pb-0.5')}\n      htmlFor={formItemId}\n      {...props}\n    >\n      {props.children}\n      {tooltip && <FormTooltip tooltip={tooltip}></FormTooltip>}\n    </Label>\n  );\n});\nFormLabel.displayName = 'FormLabel';\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } =\n    useFormField();\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n});\nFormControl.displayName = 'FormControl';\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField();\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn('text-sm text-muted-foreground', className)}\n      {...props}\n    />\n  );\n});\nFormDescription.displayName = 'FormDescription';\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField();\n  const body = error ? String(error?.message) : children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn('text-sm font-medium text-destructive', className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n});\nFormMessage.displayName = 'FormMessage';\n\nexport {\n  Form,\n  FormControl,\n  FormDescription,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n  useFormField,\n};\n","'use client';\n\nimport * as LabelPrimitive from '@radix-ui/react-label';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport * as React from 'react';\n\nimport { cn } from '@/lib/utils';\n\nconst labelVariants = cva(\n  'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n);\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n));\nLabel.displayName = LabelPrimitive.Root.displayName;\n\nexport { Label };\n","export enum ProgrammingLanguage {\n  Python = 'python',\n  Javascript = 'javascript',\n}\n\nexport const CodeTemplateStrMap = {\n  [ProgrammingLanguage.Python]: `def main(arg1: str, arg2: str) -> str:\n    return f\"result: {arg1 + arg2}\"\n`,\n  [ProgrammingLanguage.Javascript]: `const axios = require('axios');\nasync function main(args) {\n  try {\n    const response = await axios.get('https://github.com/infiniflow/ragflow');\n    console.log('Body:', response.data);\n  } catch (error) {\n    console.error('Error:', error.message);\n  }\n}\n\nmodule.exports = { main };\n`,\n};\n\nexport enum AgentGlobals {\n  SysQuery = 'sys.query',\n  SysUserId = 'sys.user_id',\n  SysConversationTurns = 'sys.conversation_turns',\n  SysFiles = 'sys.files',\n}\n","import { AgentGlobals } from '@/constants/agent';\nimport { DSL, IFlow, IFlowTemplate } from '@/interfaces/database/flow';\nimport i18n from '@/locales/config';\nimport { BeginId } from '@/pages/agent/constant';\nimport { useGetSharedChatSearchParams } from '@/pages/chat/shared-hooks';\nimport flowService from '@/services/flow-service';\nimport { buildMessageListWithUuid } from '@/utils/chat';\nimport { useMutation, useQuery, useQueryClient } from '@tanstack/react-query';\nimport { useDebounce } from 'ahooks';\nimport { message } from 'antd';\nimport { get, set } from 'lodash';\nimport { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams } from 'umi';\nimport { v4 as uuid } from 'uuid';\nimport {\n  useGetPaginationWithRouter,\n  useHandleSearchChange,\n} from './logic-hooks';\n\nexport const enum AgentApiAction {\n  FetchAgentList = 'fetchAgentList',\n  UpdateAgentSetting = 'updateAgentSetting',\n  DeleteAgent = 'deleteAgent',\n  FetchAgentDetail = 'fetchAgentDetail',\n  ResetAgent = 'resetAgent',\n  SetAgent = 'setAgent',\n  FetchAgentTemplates = 'fetchAgentTemplates',\n}\n\nexport const EmptyDsl = {\n  graph: {\n    nodes: [\n      {\n        id: BeginId,\n        type: 'beginNode',\n        position: {\n          x: 50,\n          y: 200,\n        },\n        data: {\n          label: 'Begin',\n          name: 'begin',\n        },\n        sourcePosition: 'left',\n        targetPosition: 'right',\n      },\n    ],\n    edges: [],\n  },\n  components: {\n    begin: {\n      obj: {\n        component_name: 'Begin',\n        params: {},\n      },\n      downstream: ['Answer:China'], // other edge target is downstream, edge source is current node id\n      upstream: [], // edge source is upstream, edge target is current node id\n    },\n  },\n  retrieval: [], // reference\n  history: [],\n  path: [],\n  globals: {\n    [AgentGlobals.SysQuery]: '',\n    [AgentGlobals.SysUserId]: '',\n    [AgentGlobals.SysConversationTurns]: 0,\n    [AgentGlobals.SysFiles]: [],\n  },\n};\n\nexport const useFetchAgentTemplates = () => {\n  const { t } = useTranslation();\n\n  const { data } = useQuery<IFlowTemplate[]>({\n    queryKey: [AgentApiAction.FetchAgentTemplates],\n    initialData: [],\n    queryFn: async () => {\n      const { data } = await flowService.listTemplates();\n      if (Array.isArray(data?.data)) {\n        data.data.unshift({\n          id: uuid(),\n          title: t('flow.blank'),\n          description: t('flow.createFromNothing'),\n          dsl: EmptyDsl,\n        });\n      }\n\n      return data.data;\n    },\n  });\n\n  return data;\n};\n\nexport const useFetchAgentListByPage = () => {\n  const { searchString, handleInputChange } = useHandleSearchChange();\n  const { pagination, setPagination } = useGetPaginationWithRouter();\n  const debouncedSearchString = useDebounce(searchString, { wait: 500 });\n\n  const { data, isFetching: loading } = useQuery<{\n    kbs: IFlow[];\n    total: number;\n  }>({\n    queryKey: [\n      AgentApiAction.FetchAgentList,\n      {\n        debouncedSearchString,\n        ...pagination,\n      },\n    ],\n    initialData: { kbs: [], total: 0 },\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await flowService.listCanvasTeam({\n        keywords: debouncedSearchString,\n        page_size: pagination.pageSize,\n        page: pagination.current,\n      });\n\n      return data?.data ?? [];\n    },\n  });\n\n  const onInputChange: React.ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      // setPagination({ page: 1 }); // TODO: 这里导致重复请求\n      handleInputChange(e);\n    },\n    [handleInputChange],\n  );\n\n  return {\n    data: data.kbs,\n    loading,\n    searchString,\n    handleInputChange: onInputChange,\n    pagination: { ...pagination, total: data?.total },\n    setPagination,\n  };\n};\n\nexport const useUpdateAgentSetting = () => {\n  const queryClient = useQueryClient();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: [AgentApiAction.UpdateAgentSetting],\n    mutationFn: async (params: any) => {\n      const ret = await flowService.settingCanvas(params);\n      if (ret?.data?.code === 0) {\n        message.success('success');\n        queryClient.invalidateQueries({\n          queryKey: [AgentApiAction.FetchAgentList],\n        });\n      } else {\n        message.error(ret?.data?.data);\n      }\n      return ret?.data?.code;\n    },\n  });\n\n  return { data, loading, updateAgentSetting: mutateAsync };\n};\n\nexport const useDeleteAgent = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: [AgentApiAction.DeleteAgent],\n    mutationFn: async (canvasIds: string[]) => {\n      const { data } = await flowService.removeCanvas({ canvasIds });\n      if (data.code === 0) {\n        queryClient.invalidateQueries({\n          queryKey: [AgentApiAction.FetchAgentList],\n        });\n      }\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading, deleteAgent: mutateAsync };\n};\n\nexport const useFetchAgent = (): {\n  data: IFlow;\n  loading: boolean;\n  refetch: () => void;\n} => {\n  const { id } = useParams();\n  const { sharedId } = useGetSharedChatSearchParams();\n\n  const {\n    data,\n    isFetching: loading,\n    refetch,\n  } = useQuery({\n    queryKey: [AgentApiAction.FetchAgentDetail],\n    initialData: {} as IFlow,\n    refetchOnReconnect: false,\n    refetchOnMount: false,\n    refetchOnWindowFocus: false,\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await flowService.getCanvas({}, sharedId || id);\n\n      const messageList = buildMessageListWithUuid(\n        get(data, 'data.dsl.messages', []),\n      );\n      set(data, 'data.dsl.messages', messageList);\n\n      return data?.data ?? {};\n    },\n  });\n\n  return { data, loading, refetch };\n};\n\nexport const useResetAgent = () => {\n  const { id } = useParams();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: [AgentApiAction.ResetAgent],\n    mutationFn: async () => {\n      const { data } = await flowService.resetCanvas({ id });\n      return data;\n    },\n  });\n\n  return { data, loading, resetAgent: mutateAsync };\n};\n\nexport const useSetAgent = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: [AgentApiAction.SetAgent],\n    mutationFn: async (params: {\n      id?: string;\n      title?: string;\n      dsl?: DSL;\n      avatar?: string;\n    }) => {\n      const { data = {} } = await flowService.setCanvas(params);\n      if (data.code === 0) {\n        message.success(\n          i18n.t(`message.${params?.id ? 'modified' : 'created'}`),\n        );\n        queryClient.invalidateQueries({\n          queryKey: [AgentApiAction.FetchAgentList],\n        });\n      }\n      return data;\n    },\n  });\n\n  return { data, loading, setAgent: mutateAsync };\n};\n","import { KnowledgeRouteKey } from '@/constants/knowledge';\n\nexport const routeMap = {\n  [KnowledgeRouteKey.Dataset]: 'Dataset',\n  [KnowledgeRouteKey.Testing]: 'Retrieval testing',\n  [KnowledgeRouteKey.Configuration]: 'Configuration',\n};\n\nexport enum KnowledgeDatasetRouteKey {\n  Chunk = 'chunk',\n  File = 'file',\n}\n\nexport const datasetRouteMap = {\n  [KnowledgeDatasetRouteKey.Chunk]: 'Chunk',\n  [KnowledgeDatasetRouteKey.File]: 'File Upload',\n};\n\nexport * from '@/constants/knowledge';\n\nexport const TagRenameId = 'tagRename';\n","'use client';\n\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { useForm } from 'react-hook-form';\nimport { z } from 'zod';\n\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { IModalProps } from '@/interfaces/common';\nimport { TagRenameId } from '@/pages/add-knowledge/constant';\nimport { useTranslation } from 'react-i18next';\n\nexport function CreateAgentForm({ hideModal, onOk }: IModalProps<any>) {\n  const { t } = useTranslation();\n  const FormSchema = z.object({\n    name: z\n      .string()\n      .min(1, {\n        message: t('common.namePlaceholder'),\n      })\n      .trim(),\n    tag: z.string().trim().optional(),\n    description: z.string().trim().optional(),\n  });\n\n  const form = useForm<z.infer<typeof FormSchema>>({\n    resolver: zodResolver(FormSchema),\n    defaultValues: { name: '' },\n  });\n\n  async function onSubmit(data: z.infer<typeof FormSchema>) {\n    const ret = await onOk?.(data);\n    if (ret) {\n      hideModal?.();\n    }\n  }\n\n  return (\n    <Form {...form}>\n      <form\n        onSubmit={form.handleSubmit(onSubmit)}\n        className=\"space-y-6\"\n        id={TagRenameId}\n      >\n        <FormField\n          control={form.control}\n          name=\"name\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t('common.name')}</FormLabel>\n              <FormControl>\n                <Input\n                  placeholder={t('common.namePlaceholder')}\n                  {...field}\n                  autoComplete=\"off\"\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"tag\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t('flow.tag')}</FormLabel>\n              <FormControl>\n                <Input\n                  placeholder={t('flow.tagPlaceholder')}\n                  {...field}\n                  autoComplete=\"off\"\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n        <FormField\n          control={form.control}\n          name=\"description\"\n          render={({ field }) => (\n            <FormItem>\n              <FormLabel>{t('flow.description')}</FormLabel>\n              <FormControl>\n                <Input\n                  placeholder={t('flow.descriptionPlaceholder')}\n                  {...field}\n                  autoComplete=\"off\"\n                />\n              </FormControl>\n              <FormMessage />\n            </FormItem>\n          )}\n        />\n      </form>\n    </Form>\n  );\n}\n","import { ButtonLoading } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { IModalProps } from '@/interfaces/common';\nimport { TagRenameId } from '@/pages/add-knowledge/constant';\nimport { useTranslation } from 'react-i18next';\nimport { CreateAgentForm } from './create-agent-form';\n\nexport function CreateAgentDialog({\n  hideModal,\n  onOk,\n  loading,\n}: IModalProps<any>) {\n  const { t } = useTranslation();\n\n  return (\n    <Dialog open onOpenChange={hideModal}>\n      <DialogContent className=\"sm:max-w-[425px]\">\n        <DialogHeader>\n          <DialogTitle>{t('flow.createGraph')}</DialogTitle>\n        </DialogHeader>\n        <CreateAgentForm hideModal={hideModal} onOk={onOk}></CreateAgentForm>\n        <DialogFooter>\n          <ButtonLoading type=\"submit\" form={TagRenameId} loading={loading}>\n            {t('common.save')}\n          </ButtonLoading>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { IFlowTemplate } from '@/interfaces/database/flow';\nimport { useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n  data: IFlowTemplate;\n  showModal(record: IFlowTemplate): void;\n}\n\nexport function TemplateCard({ data, showModal }: IProps) {\n  const { t } = useTranslation();\n\n  const handleClick = useCallback(() => {\n    showModal(data);\n  }, [data, showModal]);\n\n  return (\n    <Card className=\"bg-colors-background-inverse-weak  border-colors-outline-neutral-standard group relative\">\n      <CardContent className=\"p-4 \">\n        <div className=\"flex justify-between mb-4\">\n          {data.avatar ? (\n            <div\n              className=\"w-[70px] h-[70px] rounded-xl bg-cover\"\n              style={{ backgroundImage: `url(${data.avatar})` }}\n            />\n          ) : (\n            <Avatar className=\"w-[70px] h-[70px]\">\n              <AvatarImage src=\"https://github.com/shadcn.png\" />\n              <AvatarFallback>CN</AvatarFallback>\n            </Avatar>\n          )}\n        </div>\n        <h3 className=\"text-xl font-bold mb-2\">{data.title}</h3>\n        <p className=\"break-words\">{data.description}</p>\n        <Button\n          variant=\"tertiary\"\n          className=\"absolute bottom-4 right-4 left-4 hidden justify-end group-hover:block text-center\"\n          onClick={handleClick}\n        >\n          {t('flow.useTemplate')}\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}\n","import { PageHeader } from '@/components/page-header';\nimport { useSetModalState } from '@/hooks/common-hooks';\nimport { useNavigatePage } from '@/hooks/logic-hooks/navigate-hooks';\nimport { useFetchAgentTemplates, useSetAgent } from '@/hooks/use-agent-request';\nimport { IFlowTemplate } from '@/interfaces/database/flow';\nimport { useCallback, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CreateAgentDialog } from './create-agent-dialog';\nimport { TemplateCard } from './template-card';\n\nexport default function AgentTemplates() {\n  const { navigateToAgentList } = useNavigatePage();\n  const { t } = useTranslation();\n  const list = useFetchAgentTemplates();\n  const { loading, setAgent } = useSetAgent();\n\n  const {\n    visible: creatingVisible,\n    hideModal: hideCreatingModal,\n    showModal: showCreatingModal,\n  } = useSetModalState();\n\n  const [template, setTemplate] = useState<IFlowTemplate>();\n\n  const showModal = useCallback(\n    (record: IFlowTemplate) => {\n      setTemplate(record);\n      showCreatingModal();\n    },\n    [showCreatingModal],\n  );\n\n  const { navigateToAgent } = useNavigatePage();\n\n  const handleOk = useCallback(\n    async (payload: any) => {\n      let dsl = template?.dsl;\n      const ret = await setAgent({\n        title: payload.name,\n        dsl,\n        avatar: template?.avatar,\n      });\n\n      if (ret?.code === 0) {\n        hideCreatingModal();\n        navigateToAgent(ret.data.id)();\n      }\n    },\n    [\n      hideCreatingModal,\n      navigateToAgent,\n      setAgent,\n      template?.avatar,\n      template?.dsl,\n    ],\n  );\n\n  return (\n    <section>\n      <PageHeader\n        back={navigateToAgentList}\n        title={t('flow.createGraph')}\n      ></PageHeader>\n      <div className=\"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 2xl:grid-cols-8 max-h-[94vh] overflow-auto px-8\">\n        {list?.map((x) => {\n          return (\n            <TemplateCard\n              key={x.id}\n              data={x}\n              showModal={showModal}\n            ></TemplateCard>\n          );\n        })}\n      </div>\n      {creatingVisible && (\n        <CreateAgentDialog\n          loading={loading}\n          visible={creatingVisible}\n          hideModal={hideCreatingModal}\n          onOk={handleOk}\n        ></CreateAgentDialog>\n      )}\n    </section>\n  );\n}\n","import api from '@/utils/api';\nimport registerServer from '@/utils/register-server';\nimport request from '@/utils/request';\n\nconst {\n  getCanvas,\n  getCanvasSSE,\n  setCanvas,\n  getListVersion,\n  getVersion,\n  listCanvas,\n  resetCanvas,\n  removeCanvas,\n  runCanvas,\n  listTemplates,\n  testDbConnect,\n  getInputElements,\n  debug,\n  listCanvasTeam,\n  settingCanvas,\n} = api;\n\nconst methods = {\n  getCanvas: {\n    url: getCanvas,\n    method: 'get',\n  },\n  getCanvasSSE: {\n    url: getCanvasSSE,\n    method: 'get',\n  },\n  setCanvas: {\n    url: setCanvas,\n    method: 'post',\n  },\n  getListVersion: {\n    url: getListVersion,\n    method: 'get',\n  },\n  getVersion: {\n    url: getVersion,\n    method: 'get',\n  },\n  listCanvas: {\n    url: listCanvas,\n    method: 'get',\n  },\n  resetCanvas: {\n    url: resetCanvas,\n    method: 'post',\n  },\n  removeCanvas: {\n    url: removeCanvas,\n    method: 'post',\n  },\n  runCanvas: {\n    url: runCanvas,\n    method: 'post',\n  },\n  listTemplates: {\n    url: listTemplates,\n    method: 'get',\n  },\n  testDbConnect: {\n    url: testDbConnect,\n    method: 'post',\n  },\n  getInputElements: {\n    url: getInputElements,\n    method: 'get',\n  },\n  debugSingle: {\n    url: debug,\n    method: 'post',\n  },\n  listCanvasTeam: {\n    url: listCanvasTeam,\n    method: 'get',\n  },\n  settingCanvas: {\n    url: settingCanvas,\n    method: 'post',\n  },\n} as const;\n\nconst flowService = registerServer<keyof typeof methods>(methods, request);\n\nexport default flowService;\n"],"names":["PageHeader","_ref","back","title","children","_jsxs","className","_jsx","Button","variant","size","onClick","ArrowLeft","_excluded","_excluded2","_excluded3","_excluded4","Form","FormProvider","FormItemContext","React","FormFieldContext","FormField","props","Object","assign","_objectDestructuringEmpty","Provider","value","name","Controller","_objectSpread","useFormField","fieldContext","itemContext","_useFormContext","useFormContext","getFieldState","formState","fieldState","Error","id","formItemId","concat","formDescriptionId","formMessageId","InnerFormItem","_ref2","ref","_objectWithoutProperties","cn","displayName","FormItem","FormLabel","_ref3","tooltip","_useFormField","error","Label","htmlFor","FormTooltip","FormControl","_ref4","_useFormField2","Slot","FormDescription","_ref5","FormMessage","_ref6","_useFormField4","body","String","message","labelVariants","cva","LabelPrimitive","ProgrammingLanguage","CodeTemplateStrMap","_defineProperty","Python","Javascript","AgentGlobals","AgentApiAction","EmptyDsl","graph","nodes","BeginId","type","position","x","y","data","label","sourcePosition","targetPosition","edges","components","begin","obj","component_name","params","downstream","upstream","retrieval","history","path","globals","SysQuery","SysUserId","SysConversationTurns","SysFiles","useFetchAgentTemplates","_queryFn","t","useTranslation","_useQuery","useQuery","queryKey","initialData","queryFn","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$flowService$li","wrap","_context","prev","next","flowService","listTemplates","sent","Array","isArray","unshift","uuid","description","dsl","abrupt","stop","apply","arguments","useFetchAgentListByPage","_queryFn2","_useHandleSearchChang","useHandleSearchChange","searchString","handleInputChange","_useGetPaginationWith","useGetPaginationWithRouter","pagination","setPagination","debouncedSearchString","useDebounce","wait","_useQuery2","kbs","total","gcTime","_callee2","_data$data","_yield$flowService$li2","_context2","listCanvasTeam","keywords","page_size","pageSize","page","current","loading","isFetching","onInputChange","useCallback","e","useUpdateAgentSetting","_mutationFn","queryClient","useQueryClient","_useMutation","useMutation","mutationKey","mutationFn","_callee3","_ret$data","_ret$data3","ret","_ret$data2","_context3","settingCanvas","code","success","invalidateQueries","_x","isPending","updateAgentSetting","mutateAsync","useDeleteAgent","_mutationFn2","_useMutation2","_callee4","canvasIds","_data$data2","_yield$flowService$re","_context4","removeCanvas","_x2","deleteAgent","useFetchAgent","_queryFn3","useParams","sharedId","useGetSharedChatSearchParams","_useQuery3","refetchOnReconnect","refetchOnMount","refetchOnWindowFocus","_callee5","_data$data3","_yield$flowService$ge","messageList","_context5","getCanvas","buildMessageListWithUuid","get","set","refetch","useResetAgent","_mutationFn3","_useMutation3","_callee6","_yield$flowService$re2","_context6","resetCanvas","resetAgent","useSetAgent","_mutationFn4","_useMutation4","_callee7","_yield$flowService$se","_yield$flowService$se2","_context7","setCanvas","i18n","_x3","setAgent","KnowledgeDatasetRouteKey","KnowledgeRouteKey","Dataset","Testing","Configuration","TagRenameId","Chunk","File","CreateAgentForm","hideModal","onOk","FormSchema","z","object","string","min","trim","tag","optional","form","useForm","resolver","zodResolver","defaultValues","_onSubmit","onSubmit","handleSubmit","control","render","field","Input","placeholder","autoComplete","CreateAgentDialog","Dialog","open","onOpenChange","DialogContent","DialogHeader","DialogTitle","DialogFooter","ButtonLoading","TemplateCard","showModal","handleClick","Card","CardContent","avatar","style","backgroundImage","Avatar","AvatarImage","src","AvatarFallback","AgentTemplates","navigateToAgentList","useNavigatePage","list","_useSetAgent","_useSetModalState","useSetModalState","creatingVisible","visible","hideCreatingModal","showCreatingModal","_useState","useState","_useState2","_slicedToArray","template","setTemplate","record","navigateToAgent","handleOk","payload","map","methods","url","api","method","getCanvasSSE","getListVersion","getVersion","listCanvas","runCanvas","testDbConnect","getInputElements","debugSingle","debug","registerServer","request"],"sourceRoot":""}